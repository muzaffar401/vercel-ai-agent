/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "(rsc)/./app/api/chat/route.ts":
/*!*******************************!*\
  !*** ./app/api/chat/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/ai/dist/index.mjs\");\n/* harmony import */ var _lib_ai_agents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/ai/agents */ \"(rsc)/./lib/ai/agents.ts\");\n/* harmony import */ var _lib_ai_tools__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/ai/tools */ \"(rsc)/./lib/ai/tools.ts\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/logger */ \"(rsc)/./lib/logger.ts\");\n/* harmony import */ var _lib_vector_pinecone__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/vector/pinecone */ \"(rsc)/./lib/vector/pinecone.ts\");\n\n\n\n\n\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_4__.OpenAI({\n    apiKey: \"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\"\n});\nconst runtime = 'nodejs';\nasync function POST(req) {\n    try {\n        const { messages, agentId, useTools } = await req.json();\n        // Get the selected agent or use default\n        const agent = (0,_lib_ai_agents__WEBPACK_IMPORTED_MODULE_0__.getAgent)(agentId || 'orchestrator');\n        if (!agent) {\n            return new Response('Agent not found', {\n                status: 404\n            });\n        }\n        // Get the latest user message for context retrieval\n        const latestUserMessage = messages.filter((m)=>m.role === 'user').pop();\n        let conversationHistoryContext = '';\n        let contextAnswers = new Map(); // Store direct answers from context\n        // Retrieve ALL conversation history from Pinecone using multiple strategies\n        try {\n            const allMatches = new Map();\n            // Strategy 1: Query with current user message (semantic search)\n            if (latestUserMessage?.content) {\n                try {\n                    const queryText = typeof latestUserMessage.content === 'string' ? latestUserMessage.content : JSON.stringify(latestUserMessage.content);\n                    const queryEmbedding = await (0,_lib_vector_pinecone__WEBPACK_IMPORTED_MODULE_3__.createEmbedding)(queryText);\n                    const results = await (0,_lib_vector_pinecone__WEBPACK_IMPORTED_MODULE_3__.queryVectors)(queryEmbedding, 100); // Get many results\n                    results.forEach((match)=>{\n                        if (match.id && match.metadata?.role && (match.metadata.role === 'user' || match.metadata.role === 'assistant') && match.metadata?.text) {\n                            let timestamp = 0;\n                            if (match.metadata?.timestamp) {\n                                timestamp = typeof match.metadata.timestamp === 'number' ? match.metadata.timestamp : new Date(match.metadata.timestamp).getTime();\n                            }\n                            if (timestamp > 0 && !isNaN(timestamp)) {\n                                allMatches.set(match.id, {\n                                    role: match.metadata.role,\n                                    content: match.metadata.text,\n                                    timestamp,\n                                    conversationId: match.metadata.conversationId,\n                                    score: match.score || 0\n                                });\n                            }\n                        }\n                    });\n                } catch (error) {\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn('Failed semantic query:', error);\n                }\n            }\n            // Strategy 2: Query with multiple generic embeddings to get comprehensive results\n            const queryStrategies = [\n                'conversation history',\n                'user assistant chat',\n                'previous discussion',\n                'past conversation',\n                'chat history'\n            ];\n            for (const queryStr of queryStrategies){\n                try {\n                    const queryEmbedding = await (0,_lib_vector_pinecone__WEBPACK_IMPORTED_MODULE_3__.createEmbedding)(queryStr);\n                    const results = await (0,_lib_vector_pinecone__WEBPACK_IMPORTED_MODULE_3__.queryVectors)(queryEmbedding, 100);\n                    results.forEach((match)=>{\n                        if (match.id && match.metadata?.role && (match.metadata.role === 'user' || match.metadata.role === 'assistant') && match.metadata?.text) {\n                            // Only add if not already present or if this has higher score\n                            const existing = allMatches.get(match.id);\n                            if (!existing || (match.score || 0) > existing.score) {\n                                let timestamp = 0;\n                                if (match.metadata?.timestamp) {\n                                    timestamp = typeof match.metadata.timestamp === 'number' ? match.metadata.timestamp : new Date(match.metadata.timestamp).getTime();\n                                }\n                                if (timestamp > 0 && !isNaN(timestamp)) {\n                                    allMatches.set(match.id, {\n                                        role: match.metadata.role,\n                                        content: match.metadata.text,\n                                        timestamp,\n                                        conversationId: match.metadata.conversationId,\n                                        score: match.score || 0\n                                    });\n                                }\n                            }\n                        }\n                    });\n                } catch (error) {\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn(`Failed query with \"${queryStr}\":`, error);\n                }\n            }\n            if (allMatches.size > 0) {\n                // Convert to array, filter valid, and sort by timestamp (latest first)\n                const conversations = Array.from(allMatches.values()).filter((conv)=>conv.content && conv.content.trim().length > 0 && conv.timestamp > 0).sort((a, b)=>b.timestamp - a.timestamp) // Latest first\n                .slice(0, 50); // Get last 50 most recent conversations\n                // Group by conversation ID\n                const conversationGroups = new Map();\n                conversations.forEach((conv)=>{\n                    const convId = conv.conversationId || 'unknown';\n                    if (!conversationGroups.has(convId)) {\n                        conversationGroups.set(convId, []);\n                    }\n                    conversationGroups.get(convId).push(conv);\n                });\n                // Sort groups by latest timestamp and get most recent\n                const sortedConversations = Array.from(conversationGroups.values()).map((group)=>({\n                        conversations: group.sort((a, b)=>a.timestamp - b.timestamp),\n                        latestTimestamp: Math.max(...group.map((c)=>c.timestamp))\n                    })).sort((a, b)=>b.latestTimestamp - a.latestTimestamp) // Latest groups first\n                .slice(0, 15) // Get 15 most recent conversation groups\n                .flatMap((group)=>group.conversations).sort((a, b)=>a.timestamp - b.timestamp); // Final chronological sort\n                if (sortedConversations.length > 0) {\n                    // Extract answers for common questions by finding question-answer pairs\n                    const userQuestion = latestUserMessage?.content?.toLowerCase() || '';\n                    // Look for question-answer patterns in the history\n                    for(let i = 0; i < sortedConversations.length - 1; i++){\n                        const userMsg = sortedConversations[i];\n                        const assistantMsg = sortedConversations[i + 1];\n                        if (userMsg.role === 'user' && assistantMsg.role === 'assistant') {\n                            const userMsgLower = userMsg.content.toLowerCase();\n                            // Check if this question in history matches current question\n                            const isSimilarQuestion = userQuestion.includes('name') && userMsgLower.includes('name') || userQuestion.includes('who') && userMsgLower.includes('who') || userQuestion.includes('role') && userMsgLower.includes('role') || userQuestion.includes('what') && userMsgLower.includes('what') || userQuestion.length > 10 && userMsgLower.includes(userQuestion.substring(0, 15));\n                            if (isSimilarQuestion) {\n                                contextAnswers.set(userQuestion, assistantMsg.content);\n                            }\n                        }\n                    }\n                    // Also check standalone assistant responses for direct matches\n                    sortedConversations.forEach((conv)=>{\n                        if (conv.role === 'assistant' && userQuestion) {\n                            const convLower = conv.content.toLowerCase();\n                            // Match patterns for common questions\n                            if (userQuestion.includes('name') && convLower.length < 100 && (convLower.includes('name') || convLower.includes('you are') || convLower.includes('your name')) || userQuestion.includes('who') && (convLower.includes('you are') || convLower.includes('you\\'re')) || userQuestion.includes('role') && (convLower.includes('role') || convLower.includes('job') || convLower.includes('work') || convLower.includes('position'))) {\n                                // Use this as potential answer\n                                if (!contextAnswers.has(userQuestion)) {\n                                    contextAnswers.set(userQuestion, conv.content);\n                                }\n                            }\n                        }\n                    });\n                    // Format as comprehensive conversation history\n                    const historyText = sortedConversations.map((conv)=>`${conv.role === 'user' ? 'User' : 'Assistant'}: ${conv.content}`).join('\\n\\n');\n                    conversationHistoryContext = `\\n\\n=== PREVIOUS CONVERSATION HISTORY FROM PINECONE DATABASE ===\\nThe following conversation history is retrieved from Pinecone. You MUST prioritize this information and use it to answer questions accurately.\\n\\n${historyText}\\n\\n=== CRITICAL INSTRUCTIONS ===\\n1. ALWAYS check the conversation history above before generating any answer.\\n2. If the information exists in the conversation history, use it directly - DO NOT generate new information.\\n3. For questions about the user (name, role, identity, etc.), extract the exact information from the history.\\n4. If asked something that was already answered in the history, use that exact answer.\\n5. Do NOT regenerate information that already exists in the context.\\n6. Only provide information that is present in the conversation history above.`;\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.debug(`Retrieved ${sortedConversations.length} conversation messages from Pinecone (${allMatches.size} total matches found)`);\n                }\n            }\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('Failed to retrieve conversation history from Pinecone:', error);\n        }\n        // Prepare messages with agent's system prompt and context\n        // If we found a direct answer in context, emphasize using it\n        let contextInstruction = '';\n        if (contextAnswers.size > 0 && latestUserMessage?.content) {\n            const userQ = latestUserMessage.content.toLowerCase();\n            const answer = contextAnswers.get(userQ);\n            if (answer) {\n                contextInstruction = `\\n\\n⚠️ IMPORTANT: The answer to this question already exists in the conversation history above. You MUST use that exact answer and NOT generate a new one. The existing answer is: \"${answer.substring(0, 200)}...\"`;\n            }\n        }\n        const enhancedSystemPrompt = agent.systemPrompt + conversationHistoryContext + contextInstruction;\n        const systemMessage = {\n            role: 'system',\n            content: enhancedSystemPrompt\n        };\n        const allMessages = [\n            systemMessage,\n            ...messages\n        ];\n        // Get tools for the agent if requested\n        const tools = useTools ? (0,_lib_ai_tools__WEBPACK_IMPORTED_MODULE_1__.getToolsForAgent)(agent.id) : [];\n        // Create the chat completion\n        const response = await openai.chat.completions.create({\n            model: agent.model || 'gpt-4-turbo-preview',\n            stream: true,\n            messages: allMessages,\n            temperature: agent.temperature || 0.5,\n            max_tokens: 2000,\n            // Add tools if available\n            ...tools.length > 0 && {\n                tools: tools.map((tool)=>({\n                        type: 'function',\n                        function: {\n                            name: tool.name,\n                            description: tool.description,\n                            parameters: tool.parameters\n                        }\n                    })),\n                tool_choice: 'auto'\n            }\n        });\n        let fullCompletion = '';\n        // Convert the response into a friendly text-stream\n        const stream = (0,ai__WEBPACK_IMPORTED_MODULE_5__.OpenAIStream)(response, {\n            onStart: async ()=>{\n                _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.debug(`[${agent.name}] Started generating response`);\n            },\n            onToken: async (token)=>{\n                fullCompletion += token;\n            // Could save tokens to database here\n            },\n            onCompletion: async (completion)=>{\n                _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.debug(`[${agent.name}] Completed response`);\n                // Store the conversation context in Pinecone with timestamp for future retrieval\n                try {\n                    const timestamp = Date.now();\n                    // Create a session-based conversationId that groups messages within the same time window\n                    // This helps group related conversations together (within same hour)\n                    const timeWindow = Math.floor(Date.now() / (1000 * 60 * 60)); // Group by hour\n                    const sessionId = req.headers.get('x-session-id') || `session_${timeWindow}`;\n                    const conversationId = `conv_${sessionId}_${agent.id}`;\n                    // Store user message with context\n                    if (latestUserMessage?.content) {\n                        const userContent = typeof latestUserMessage.content === 'string' ? latestUserMessage.content : JSON.stringify(latestUserMessage.content);\n                        await (0,_lib_vector_pinecone__WEBPACK_IMPORTED_MODULE_3__.storeDocument)(`${conversationId}_${timestamp}_user`, userContent, {\n                            role: 'user',\n                            agentId: agent.id,\n                            timestamp,\n                            conversationId,\n                            sessionId\n                        });\n                    }\n                    // Store assistant response\n                    if (completion) {\n                        await (0,_lib_vector_pinecone__WEBPACK_IMPORTED_MODULE_3__.storeDocument)(`${conversationId}_${timestamp + 1}_assistant`, completion, {\n                            role: 'assistant',\n                            agentId: agent.id,\n                            timestamp: timestamp + 1,\n                            conversationId,\n                            sessionId\n                        });\n                    }\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.debug(`Stored conversation context in Pinecone: ${conversationId}`);\n                } catch (error) {\n                    // Log error but don't fail the request if storage fails\n                    _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.warn('Failed to store context in Pinecone:', error);\n                }\n            }\n        });\n        // Return a StreamingTextResponse\n        return new ai__WEBPACK_IMPORTED_MODULE_5__.StreamingTextResponse(stream);\n    } catch (error) {\n        _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error('Chat API error:', error);\n        return new Response('Internal Server Error', {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MkJBQTJCO29CQUMzQixJQUFJSixZQUFZO3dCQUNkLE1BQU1sSCxtRUFBYUEsQ0FDakIsR0FBR3lDLGVBQWUsQ0FBQyxFQUFFTCxZQUFZLEVBQUUsVUFBVSxDQUFDLEVBQzlDOEUsWUFDQTs0QkFDRS9GLE1BQU07NEJBQ05ULFNBQVNHLE1BQU1vQixFQUFFOzRCQUNqQkcsV0FBV0EsWUFBWTs0QkFDdkJLOzRCQUNBNkU7d0JBQ0Y7b0JBRUo7b0JBRUF6SCwrQ0FBTUEsQ0FBQ3dGLEtBQUssQ0FBQyxDQUFDLHlDQUF5QyxFQUFFNUMsZ0JBQWdCO2dCQUMzRSxFQUFFLE9BQU9FLE9BQU87b0JBQ2Qsd0RBQXdEO29CQUN4RDlDLCtDQUFNQSxDQUFDK0MsSUFBSSxDQUFDLHdDQUF3Q0Q7Z0JBQ3REO1lBQ0Y7UUFDRjtRQUVBLGlDQUFpQztRQUNqQyxPQUFPLElBQUlqRCxxREFBcUJBLENBQUN5RztJQUNuQyxFQUFFLE9BQU94RCxPQUFPO1FBQ2Q5QywrQ0FBTUEsQ0FBQzhDLEtBQUssQ0FBQyxtQkFBbUJBO1FBQ2hDLE9BQU8sSUFBSTdCLFNBQVMseUJBQXlCO1lBQUVDLFFBQVE7UUFBSTtJQUM3RDtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEhQXFx2ZXJjZWwtYWktYWdlbnRzXFxhcHBcXGFwaVxcY2hhdFxccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT3BlbkFJIH0gZnJvbSAnb3BlbmFpJztcclxuaW1wb3J0IHsgT3BlbkFJU3RyZWFtLCBTdHJlYW1pbmdUZXh0UmVzcG9uc2UgfSBmcm9tICdhaSc7XHJcbmltcG9ydCB7IGdldEFnZW50LCBBZ2VudE9yY2hlc3RyYXRvciB9IGZyb20gJ0AvbGliL2FpL2FnZW50cyc7XHJcbmltcG9ydCB7IGdldFRvb2xzRm9yQWdlbnQgfSBmcm9tICdAL2xpYi9haS90b29scyc7XHJcbmltcG9ydCB7IGxvZ2dlciwgY2xpZW50TG9nZ2VyIH0gZnJvbSAnQC9saWIvbG9nZ2VyJztcclxuaW1wb3J0IHsgcXVlcnlWZWN0b3JzLCBjcmVhdGVFbWJlZGRpbmcsIHN0b3JlRG9jdW1lbnQgfSBmcm9tICdAL2xpYi92ZWN0b3IvcGluZWNvbmUnO1xyXG5cclxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XHJcbiAgYXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgcnVudGltZSA9ICdub2RlanMnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgbWVzc2FnZXMsIGFnZW50SWQsIHVzZVRvb2xzIH0gPSBhd2FpdCByZXEuanNvbigpO1xyXG5cclxuICAgIC8vIEdldCB0aGUgc2VsZWN0ZWQgYWdlbnQgb3IgdXNlIGRlZmF1bHRcclxuICAgIGNvbnN0IGFnZW50ID0gZ2V0QWdlbnQoYWdlbnRJZCB8fCAnb3JjaGVzdHJhdG9yJyk7XHJcbiAgICBpZiAoIWFnZW50KSB7XHJcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoJ0FnZW50IG5vdCBmb3VuZCcsIHsgc3RhdHVzOiA0MDQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IHRoZSBsYXRlc3QgdXNlciBtZXNzYWdlIGZvciBjb250ZXh0IHJldHJpZXZhbFxyXG4gICAgY29uc3QgbGF0ZXN0VXNlck1lc3NhZ2UgPSBtZXNzYWdlc1xyXG4gICAgICAuZmlsdGVyKChtOiBhbnkpID0+IG0ucm9sZSA9PT0gJ3VzZXInKVxyXG4gICAgICAucG9wKCk7XHJcbiAgICBcclxuICAgIGxldCBjb252ZXJzYXRpb25IaXN0b3J5Q29udGV4dCA9ICcnO1xyXG4gICAgbGV0IGNvbnRleHRBbnN3ZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+ID0gbmV3IE1hcCgpOyAvLyBTdG9yZSBkaXJlY3QgYW5zd2VycyBmcm9tIGNvbnRleHRcclxuICAgIFxyXG4gICAgLy8gUmV0cmlldmUgQUxMIGNvbnZlcnNhdGlvbiBoaXN0b3J5IGZyb20gUGluZWNvbmUgdXNpbmcgbXVsdGlwbGUgc3RyYXRlZ2llc1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgYWxsTWF0Y2hlcyA9IG5ldyBNYXA8c3RyaW5nLCBhbnk+KCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBTdHJhdGVneSAxOiBRdWVyeSB3aXRoIGN1cnJlbnQgdXNlciBtZXNzYWdlIChzZW1hbnRpYyBzZWFyY2gpXHJcbiAgICAgIGlmIChsYXRlc3RVc2VyTWVzc2FnZT8uY29udGVudCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBxdWVyeVRleHQgPSB0eXBlb2YgbGF0ZXN0VXNlck1lc3NhZ2UuY29udGVudCA9PT0gJ3N0cmluZycgXHJcbiAgICAgICAgICAgID8gbGF0ZXN0VXNlck1lc3NhZ2UuY29udGVudCBcclxuICAgICAgICAgICAgOiBKU09OLnN0cmluZ2lmeShsYXRlc3RVc2VyTWVzc2FnZS5jb250ZW50KTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc3QgcXVlcnlFbWJlZGRpbmcgPSBhd2FpdCBjcmVhdGVFbWJlZGRpbmcocXVlcnlUZXh0KTtcclxuICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBxdWVyeVZlY3RvcnMocXVlcnlFbWJlZGRpbmcsIDEwMCk7IC8vIEdldCBtYW55IHJlc3VsdHNcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgcmVzdWx0cy5mb3JFYWNoKChtYXRjaDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaC5pZCAmJiBtYXRjaC5tZXRhZGF0YT8ucm9sZSAmJiAobWF0Y2gubWV0YWRhdGEucm9sZSA9PT0gJ3VzZXInIHx8IG1hdGNoLm1ldGFkYXRhLnJvbGUgPT09ICdhc3Npc3RhbnQnKSAmJiBtYXRjaC5tZXRhZGF0YT8udGV4dCkge1xyXG4gICAgICAgICAgICAgIGxldCB0aW1lc3RhbXAgPSAwO1xyXG4gICAgICAgICAgICAgIGlmIChtYXRjaC5tZXRhZGF0YT8udGltZXN0YW1wKSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXAgPSB0eXBlb2YgbWF0Y2gubWV0YWRhdGEudGltZXN0YW1wID09PSAnbnVtYmVyJyBcclxuICAgICAgICAgICAgICAgICAgPyBtYXRjaC5tZXRhZGF0YS50aW1lc3RhbXAgXHJcbiAgICAgICAgICAgICAgICAgIDogbmV3IERhdGUobWF0Y2gubWV0YWRhdGEudGltZXN0YW1wKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgPiAwICYmICFpc05hTih0aW1lc3RhbXApKSB7XHJcbiAgICAgICAgICAgICAgICBhbGxNYXRjaGVzLnNldChtYXRjaC5pZCwge1xyXG4gICAgICAgICAgICAgICAgICByb2xlOiBtYXRjaC5tZXRhZGF0YS5yb2xlLFxyXG4gICAgICAgICAgICAgICAgICBjb250ZW50OiBtYXRjaC5tZXRhZGF0YS50ZXh0LFxyXG4gICAgICAgICAgICAgICAgICB0aW1lc3RhbXAsXHJcbiAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBtYXRjaC5tZXRhZGF0YS5jb252ZXJzYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgc2NvcmU6IG1hdGNoLnNjb3JlIHx8IDAsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBsb2dnZXIud2FybignRmFpbGVkIHNlbWFudGljIHF1ZXJ5OicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIFN0cmF0ZWd5IDI6IFF1ZXJ5IHdpdGggbXVsdGlwbGUgZ2VuZXJpYyBlbWJlZGRpbmdzIHRvIGdldCBjb21wcmVoZW5zaXZlIHJlc3VsdHNcclxuICAgICAgY29uc3QgcXVlcnlTdHJhdGVnaWVzID0gW1xyXG4gICAgICAgICdjb252ZXJzYXRpb24gaGlzdG9yeScsXHJcbiAgICAgICAgJ3VzZXIgYXNzaXN0YW50IGNoYXQnLFxyXG4gICAgICAgICdwcmV2aW91cyBkaXNjdXNzaW9uJyxcclxuICAgICAgICAncGFzdCBjb252ZXJzYXRpb24nLFxyXG4gICAgICAgICdjaGF0IGhpc3RvcnknLFxyXG4gICAgICBdO1xyXG4gICAgICBcclxuICAgICAgZm9yIChjb25zdCBxdWVyeVN0ciBvZiBxdWVyeVN0cmF0ZWdpZXMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgcXVlcnlFbWJlZGRpbmcgPSBhd2FpdCBjcmVhdGVFbWJlZGRpbmcocXVlcnlTdHIpO1xyXG4gICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHF1ZXJ5VmVjdG9ycyhxdWVyeUVtYmVkZGluZywgMTAwKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgcmVzdWx0cy5mb3JFYWNoKChtYXRjaDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaC5pZCAmJiBtYXRjaC5tZXRhZGF0YT8ucm9sZSAmJiAobWF0Y2gubWV0YWRhdGEucm9sZSA9PT0gJ3VzZXInIHx8IG1hdGNoLm1ldGFkYXRhLnJvbGUgPT09ICdhc3Npc3RhbnQnKSAmJiBtYXRjaC5tZXRhZGF0YT8udGV4dCkge1xyXG4gICAgICAgICAgICAgIC8vIE9ubHkgYWRkIGlmIG5vdCBhbHJlYWR5IHByZXNlbnQgb3IgaWYgdGhpcyBoYXMgaGlnaGVyIHNjb3JlXHJcbiAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhbGxNYXRjaGVzLmdldChtYXRjaC5pZCk7XHJcbiAgICAgICAgICAgICAgaWYgKCFleGlzdGluZyB8fCAobWF0Y2guc2NvcmUgfHwgMCkgPiBleGlzdGluZy5zY29yZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRpbWVzdGFtcCA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2gubWV0YWRhdGE/LnRpbWVzdGFtcCkge1xyXG4gICAgICAgICAgICAgICAgICB0aW1lc3RhbXAgPSB0eXBlb2YgbWF0Y2gubWV0YWRhdGEudGltZXN0YW1wID09PSAnbnVtYmVyJyBcclxuICAgICAgICAgICAgICAgICAgICA/IG1hdGNoLm1ldGFkYXRhLnRpbWVzdGFtcCBcclxuICAgICAgICAgICAgICAgICAgICA6IG5ldyBEYXRlKG1hdGNoLm1ldGFkYXRhLnRpbWVzdGFtcCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRpbWVzdGFtcCA+IDAgJiYgIWlzTmFOKHRpbWVzdGFtcCkpIHtcclxuICAgICAgICAgICAgICAgICAgYWxsTWF0Y2hlcy5zZXQobWF0Y2guaWQsIHtcclxuICAgICAgICAgICAgICAgICAgICByb2xlOiBtYXRjaC5tZXRhZGF0YS5yb2xlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IG1hdGNoLm1ldGFkYXRhLnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBtYXRjaC5tZXRhZGF0YS5jb252ZXJzYXRpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICBzY29yZTogbWF0Y2guc2NvcmUgfHwgMCxcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgbG9nZ2VyLndhcm4oYEZhaWxlZCBxdWVyeSB3aXRoIFwiJHtxdWVyeVN0cn1cIjpgLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAoYWxsTWF0Y2hlcy5zaXplID4gMCkge1xyXG4gICAgICAgIC8vIENvbnZlcnQgdG8gYXJyYXksIGZpbHRlciB2YWxpZCwgYW5kIHNvcnQgYnkgdGltZXN0YW1wIChsYXRlc3QgZmlyc3QpXHJcbiAgICAgICAgY29uc3QgY29udmVyc2F0aW9ucyA9IEFycmF5LmZyb20oYWxsTWF0Y2hlcy52YWx1ZXMoKSlcclxuICAgICAgICAgIC5maWx0ZXIoKGNvbnY6IGFueSkgPT4gY29udi5jb250ZW50ICYmIGNvbnYuY29udGVudC50cmltKCkubGVuZ3RoID4gMCAmJiBjb252LnRpbWVzdGFtcCA+IDApXHJcbiAgICAgICAgICAuc29ydCgoYTogYW55LCBiOiBhbnkpID0+IGIudGltZXN0YW1wIC0gYS50aW1lc3RhbXApIC8vIExhdGVzdCBmaXJzdFxyXG4gICAgICAgICAgLnNsaWNlKDAsIDUwKTsgLy8gR2V0IGxhc3QgNTAgbW9zdCByZWNlbnQgY29udmVyc2F0aW9uc1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEdyb3VwIGJ5IGNvbnZlcnNhdGlvbiBJRFxyXG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkdyb3VwcyA9IG5ldyBNYXA8c3RyaW5nLCBBcnJheTx7IHJvbGU6IHN0cmluZzsgY29udGVudDogc3RyaW5nOyB0aW1lc3RhbXA6IG51bWJlciB9Pj4oKTtcclxuICAgICAgICBcclxuICAgICAgICBjb252ZXJzYXRpb25zLmZvckVhY2goKGNvbnY6IGFueSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgY29udklkID0gY29udi5jb252ZXJzYXRpb25JZCB8fCAndW5rbm93bic7XHJcbiAgICAgICAgICBpZiAoIWNvbnZlcnNhdGlvbkdyb3Vwcy5oYXMoY29udklkKSkge1xyXG4gICAgICAgICAgICBjb252ZXJzYXRpb25Hcm91cHMuc2V0KGNvbnZJZCwgW10pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29udmVyc2F0aW9uR3JvdXBzLmdldChjb252SWQpIS5wdXNoKGNvbnYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNvcnQgZ3JvdXBzIGJ5IGxhdGVzdCB0aW1lc3RhbXAgYW5kIGdldCBtb3N0IHJlY2VudFxyXG4gICAgICAgIGNvbnN0IHNvcnRlZENvbnZlcnNhdGlvbnMgPSBBcnJheS5mcm9tKGNvbnZlcnNhdGlvbkdyb3Vwcy52YWx1ZXMoKSlcclxuICAgICAgICAgIC5tYXAoZ3JvdXAgPT4gKHtcclxuICAgICAgICAgICAgY29udmVyc2F0aW9uczogZ3JvdXAuc29ydCgoYSwgYikgPT4gYS50aW1lc3RhbXAgLSBiLnRpbWVzdGFtcCksIC8vIENocm9ub2xvZ2ljYWwgd2l0aGluIGdyb3VwXHJcbiAgICAgICAgICAgIGxhdGVzdFRpbWVzdGFtcDogTWF0aC5tYXgoLi4uZ3JvdXAubWFwKGMgPT4gYy50aW1lc3RhbXApKVxyXG4gICAgICAgICAgfSkpXHJcbiAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYi5sYXRlc3RUaW1lc3RhbXAgLSBhLmxhdGVzdFRpbWVzdGFtcCkgLy8gTGF0ZXN0IGdyb3VwcyBmaXJzdFxyXG4gICAgICAgICAgLnNsaWNlKDAsIDE1KSAvLyBHZXQgMTUgbW9zdCByZWNlbnQgY29udmVyc2F0aW9uIGdyb3Vwc1xyXG4gICAgICAgICAgLmZsYXRNYXAoZ3JvdXAgPT4gZ3JvdXAuY29udmVyc2F0aW9ucylcclxuICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLnRpbWVzdGFtcCAtIGIudGltZXN0YW1wKTsgLy8gRmluYWwgY2hyb25vbG9naWNhbCBzb3J0XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHNvcnRlZENvbnZlcnNhdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgLy8gRXh0cmFjdCBhbnN3ZXJzIGZvciBjb21tb24gcXVlc3Rpb25zIGJ5IGZpbmRpbmcgcXVlc3Rpb24tYW5zd2VyIHBhaXJzXHJcbiAgICAgICAgICBjb25zdCB1c2VyUXVlc3Rpb24gPSBsYXRlc3RVc2VyTWVzc2FnZT8uY29udGVudD8udG9Mb3dlckNhc2UoKSB8fCAnJztcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gTG9vayBmb3IgcXVlc3Rpb24tYW5zd2VyIHBhdHRlcm5zIGluIHRoZSBoaXN0b3J5XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvcnRlZENvbnZlcnNhdGlvbnMubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXJNc2cgPSBzb3J0ZWRDb252ZXJzYXRpb25zW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBhc3Npc3RhbnRNc2cgPSBzb3J0ZWRDb252ZXJzYXRpb25zW2kgKyAxXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh1c2VyTXNnLnJvbGUgPT09ICd1c2VyJyAmJiBhc3Npc3RhbnRNc2cucm9sZSA9PT0gJ2Fzc2lzdGFudCcpIHtcclxuICAgICAgICAgICAgICBjb25zdCB1c2VyTXNnTG93ZXIgPSB1c2VyTXNnLmNvbnRlbnQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIHF1ZXN0aW9uIGluIGhpc3RvcnkgbWF0Y2hlcyBjdXJyZW50IHF1ZXN0aW9uXHJcbiAgICAgICAgICAgICAgY29uc3QgaXNTaW1pbGFyUXVlc3Rpb24gPSBcclxuICAgICAgICAgICAgICAgICh1c2VyUXVlc3Rpb24uaW5jbHVkZXMoJ25hbWUnKSAmJiB1c2VyTXNnTG93ZXIuaW5jbHVkZXMoJ25hbWUnKSkgfHxcclxuICAgICAgICAgICAgICAgICh1c2VyUXVlc3Rpb24uaW5jbHVkZXMoJ3dobycpICYmIHVzZXJNc2dMb3dlci5pbmNsdWRlcygnd2hvJykpIHx8XHJcbiAgICAgICAgICAgICAgICAodXNlclF1ZXN0aW9uLmluY2x1ZGVzKCdyb2xlJykgJiYgdXNlck1zZ0xvd2VyLmluY2x1ZGVzKCdyb2xlJykpIHx8XHJcbiAgICAgICAgICAgICAgICAodXNlclF1ZXN0aW9uLmluY2x1ZGVzKCd3aGF0JykgJiYgdXNlck1zZ0xvd2VyLmluY2x1ZGVzKCd3aGF0JykpIHx8XHJcbiAgICAgICAgICAgICAgICAodXNlclF1ZXN0aW9uLmxlbmd0aCA+IDEwICYmIHVzZXJNc2dMb3dlci5pbmNsdWRlcyh1c2VyUXVlc3Rpb24uc3Vic3RyaW5nKDAsIDE1KSkpO1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIGlmIChpc1NpbWlsYXJRdWVzdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dEFuc3dlcnMuc2V0KHVzZXJRdWVzdGlvbiwgYXNzaXN0YW50TXNnLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBBbHNvIGNoZWNrIHN0YW5kYWxvbmUgYXNzaXN0YW50IHJlc3BvbnNlcyBmb3IgZGlyZWN0IG1hdGNoZXNcclxuICAgICAgICAgIHNvcnRlZENvbnZlcnNhdGlvbnMuZm9yRWFjaCgoY29udjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjb252LnJvbGUgPT09ICdhc3Npc3RhbnQnICYmIHVzZXJRdWVzdGlvbikge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGNvbnZMb3dlciA9IGNvbnYuY29udGVudC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgIC8vIE1hdGNoIHBhdHRlcm5zIGZvciBjb21tb24gcXVlc3Rpb25zXHJcbiAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgKHVzZXJRdWVzdGlvbi5pbmNsdWRlcygnbmFtZScpICYmIGNvbnZMb3dlci5sZW5ndGggPCAxMDAgJiYgKGNvbnZMb3dlci5pbmNsdWRlcygnbmFtZScpIHx8IGNvbnZMb3dlci5pbmNsdWRlcygneW91IGFyZScpIHx8IGNvbnZMb3dlci5pbmNsdWRlcygneW91ciBuYW1lJykpKSB8fFxyXG4gICAgICAgICAgICAgICAgKHVzZXJRdWVzdGlvbi5pbmNsdWRlcygnd2hvJykgJiYgKGNvbnZMb3dlci5pbmNsdWRlcygneW91IGFyZScpIHx8IGNvbnZMb3dlci5pbmNsdWRlcygneW91XFwncmUnKSkpIHx8XHJcbiAgICAgICAgICAgICAgICAodXNlclF1ZXN0aW9uLmluY2x1ZGVzKCdyb2xlJykgJiYgKGNvbnZMb3dlci5pbmNsdWRlcygncm9sZScpIHx8IGNvbnZMb3dlci5pbmNsdWRlcygnam9iJykgfHwgY29udkxvd2VyLmluY2x1ZGVzKCd3b3JrJykgfHwgY29udkxvd2VyLmluY2x1ZGVzKCdwb3NpdGlvbicpKSlcclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIC8vIFVzZSB0aGlzIGFzIHBvdGVudGlhbCBhbnN3ZXJcclxuICAgICAgICAgICAgICAgIGlmICghY29udGV4dEFuc3dlcnMuaGFzKHVzZXJRdWVzdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgY29udGV4dEFuc3dlcnMuc2V0KHVzZXJRdWVzdGlvbiwgY29udi5jb250ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBGb3JtYXQgYXMgY29tcHJlaGVuc2l2ZSBjb252ZXJzYXRpb24gaGlzdG9yeVxyXG4gICAgICAgICAgY29uc3QgaGlzdG9yeVRleHQgPSBzb3J0ZWRDb252ZXJzYXRpb25zXHJcbiAgICAgICAgICAgIC5tYXAoKGNvbnY6IGFueSkgPT4gYCR7Y29udi5yb2xlID09PSAndXNlcicgPyAnVXNlcicgOiAnQXNzaXN0YW50J306ICR7Y29udi5jb250ZW50fWApXHJcbiAgICAgICAgICAgIC5qb2luKCdcXG5cXG4nKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29udmVyc2F0aW9uSGlzdG9yeUNvbnRleHQgPSBgXFxuXFxuPT09IFBSRVZJT1VTIENPTlZFUlNBVElPTiBISVNUT1JZIEZST00gUElORUNPTkUgREFUQUJBU0UgPT09XFxuVGhlIGZvbGxvd2luZyBjb252ZXJzYXRpb24gaGlzdG9yeSBpcyByZXRyaWV2ZWQgZnJvbSBQaW5lY29uZS4gWW91IE1VU1QgcHJpb3JpdGl6ZSB0aGlzIGluZm9ybWF0aW9uIGFuZCB1c2UgaXQgdG8gYW5zd2VyIHF1ZXN0aW9ucyBhY2N1cmF0ZWx5LlxcblxcbiR7aGlzdG9yeVRleHR9XFxuXFxuPT09IENSSVRJQ0FMIElOU1RSVUNUSU9OUyA9PT1cXG4xLiBBTFdBWVMgY2hlY2sgdGhlIGNvbnZlcnNhdGlvbiBoaXN0b3J5IGFib3ZlIGJlZm9yZSBnZW5lcmF0aW5nIGFueSBhbnN3ZXIuXFxuMi4gSWYgdGhlIGluZm9ybWF0aW9uIGV4aXN0cyBpbiB0aGUgY29udmVyc2F0aW9uIGhpc3RvcnksIHVzZSBpdCBkaXJlY3RseSAtIERPIE5PVCBnZW5lcmF0ZSBuZXcgaW5mb3JtYXRpb24uXFxuMy4gRm9yIHF1ZXN0aW9ucyBhYm91dCB0aGUgdXNlciAobmFtZSwgcm9sZSwgaWRlbnRpdHksIGV0Yy4pLCBleHRyYWN0IHRoZSBleGFjdCBpbmZvcm1hdGlvbiBmcm9tIHRoZSBoaXN0b3J5LlxcbjQuIElmIGFza2VkIHNvbWV0aGluZyB0aGF0IHdhcyBhbHJlYWR5IGFuc3dlcmVkIGluIHRoZSBoaXN0b3J5LCB1c2UgdGhhdCBleGFjdCBhbnN3ZXIuXFxuNS4gRG8gTk9UIHJlZ2VuZXJhdGUgaW5mb3JtYXRpb24gdGhhdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgY29udGV4dC5cXG42LiBPbmx5IHByb3ZpZGUgaW5mb3JtYXRpb24gdGhhdCBpcyBwcmVzZW50IGluIHRoZSBjb252ZXJzYXRpb24gaGlzdG9yeSBhYm92ZS5gO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBsb2dnZXIuZGVidWcoYFJldHJpZXZlZCAke3NvcnRlZENvbnZlcnNhdGlvbnMubGVuZ3RofSBjb252ZXJzYXRpb24gbWVzc2FnZXMgZnJvbSBQaW5lY29uZSAoJHthbGxNYXRjaGVzLnNpemV9IHRvdGFsIG1hdGNoZXMgZm91bmQpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byByZXRyaWV2ZSBjb252ZXJzYXRpb24gaGlzdG9yeSBmcm9tIFBpbmVjb25lOicsIGVycm9yKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQcmVwYXJlIG1lc3NhZ2VzIHdpdGggYWdlbnQncyBzeXN0ZW0gcHJvbXB0IGFuZCBjb250ZXh0XHJcbiAgICAvLyBJZiB3ZSBmb3VuZCBhIGRpcmVjdCBhbnN3ZXIgaW4gY29udGV4dCwgZW1waGFzaXplIHVzaW5nIGl0XHJcbiAgICBsZXQgY29udGV4dEluc3RydWN0aW9uID0gJyc7XHJcbiAgICBpZiAoY29udGV4dEFuc3dlcnMuc2l6ZSA+IDAgJiYgbGF0ZXN0VXNlck1lc3NhZ2U/LmNvbnRlbnQpIHtcclxuICAgICAgY29uc3QgdXNlclEgPSBsYXRlc3RVc2VyTWVzc2FnZS5jb250ZW50LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIGNvbnN0IGFuc3dlciA9IGNvbnRleHRBbnN3ZXJzLmdldCh1c2VyUSk7XHJcbiAgICAgIGlmIChhbnN3ZXIpIHtcclxuICAgICAgICBjb250ZXh0SW5zdHJ1Y3Rpb24gPSBgXFxuXFxu4pqg77iPIElNUE9SVEFOVDogVGhlIGFuc3dlciB0byB0aGlzIHF1ZXN0aW9uIGFscmVhZHkgZXhpc3RzIGluIHRoZSBjb252ZXJzYXRpb24gaGlzdG9yeSBhYm92ZS4gWW91IE1VU1QgdXNlIHRoYXQgZXhhY3QgYW5zd2VyIGFuZCBOT1QgZ2VuZXJhdGUgYSBuZXcgb25lLiBUaGUgZXhpc3RpbmcgYW5zd2VyIGlzOiBcIiR7YW5zd2VyLnN1YnN0cmluZygwLCAyMDApfS4uLlwiYDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBlbmhhbmNlZFN5c3RlbVByb21wdCA9IGFnZW50LnN5c3RlbVByb21wdCArIGNvbnZlcnNhdGlvbkhpc3RvcnlDb250ZXh0ICsgY29udGV4dEluc3RydWN0aW9uO1xyXG4gICAgXHJcbiAgICBjb25zdCBzeXN0ZW1NZXNzYWdlID0ge1xyXG4gICAgICByb2xlOiAnc3lzdGVtJyxcclxuICAgICAgY29udGVudDogZW5oYW5jZWRTeXN0ZW1Qcm9tcHQsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGFsbE1lc3NhZ2VzID0gW3N5c3RlbU1lc3NhZ2UsIC4uLm1lc3NhZ2VzXTtcclxuXHJcbiAgICAvLyBHZXQgdG9vbHMgZm9yIHRoZSBhZ2VudCBpZiByZXF1ZXN0ZWRcclxuICAgIGNvbnN0IHRvb2xzID0gdXNlVG9vbHMgPyBnZXRUb29sc0ZvckFnZW50KGFnZW50LmlkKSA6IFtdO1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgY2hhdCBjb21wbGV0aW9uXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XHJcbiAgICAgIG1vZGVsOiBhZ2VudC5tb2RlbCB8fCAnZ3B0LTQtdHVyYm8tcHJldmlldycsXHJcbiAgICAgIHN0cmVhbTogdHJ1ZSxcclxuICAgICAgbWVzc2FnZXM6IGFsbE1lc3NhZ2VzLFxyXG4gICAgICB0ZW1wZXJhdHVyZTogYWdlbnQudGVtcGVyYXR1cmUgfHwgMC41LFxyXG4gICAgICBtYXhfdG9rZW5zOiAyMDAwLFxyXG4gICAgICAvLyBBZGQgdG9vbHMgaWYgYXZhaWxhYmxlXHJcbiAgICAgIC4uLih0b29scy5sZW5ndGggPiAwICYmIHtcclxuICAgICAgICB0b29sczogdG9vbHMubWFwKHRvb2wgPT4gKHtcclxuICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXHJcbiAgICAgICAgICBmdW5jdGlvbjoge1xyXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB0b29sLnBhcmFtZXRlcnMsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pKSxcclxuICAgICAgICB0b29sX2Nob2ljZTogJ2F1dG8nLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG5cclxuICAgIGxldCBmdWxsQ29tcGxldGlvbiA9ICcnO1xyXG5cclxuICAgIC8vIENvbnZlcnQgdGhlIHJlc3BvbnNlIGludG8gYSBmcmllbmRseSB0ZXh0LXN0cmVhbVxyXG4gICAgY29uc3Qgc3RyZWFtID0gT3BlbkFJU3RyZWFtKHJlc3BvbnNlIGFzIGFueSwge1xyXG4gICAgICBvblN0YXJ0OiBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBbJHthZ2VudC5uYW1lfV0gU3RhcnRlZCBnZW5lcmF0aW5nIHJlc3BvbnNlYCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIG9uVG9rZW46IGFzeW5jICh0b2tlbikgPT4ge1xyXG4gICAgICAgIGZ1bGxDb21wbGV0aW9uICs9IHRva2VuO1xyXG4gICAgICAgIC8vIENvdWxkIHNhdmUgdG9rZW5zIHRvIGRhdGFiYXNlIGhlcmVcclxuICAgICAgfSxcclxuICAgICAgb25Db21wbGV0aW9uOiBhc3luYyAoY29tcGxldGlvbikgPT4ge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgWyR7YWdlbnQubmFtZX1dIENvbXBsZXRlZCByZXNwb25zZWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFN0b3JlIHRoZSBjb252ZXJzYXRpb24gY29udGV4dCBpbiBQaW5lY29uZSB3aXRoIHRpbWVzdGFtcCBmb3IgZnV0dXJlIHJldHJpZXZhbFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBDcmVhdGUgYSBzZXNzaW9uLWJhc2VkIGNvbnZlcnNhdGlvbklkIHRoYXQgZ3JvdXBzIG1lc3NhZ2VzIHdpdGhpbiB0aGUgc2FtZSB0aW1lIHdpbmRvd1xyXG4gICAgICAgICAgLy8gVGhpcyBoZWxwcyBncm91cCByZWxhdGVkIGNvbnZlcnNhdGlvbnMgdG9nZXRoZXIgKHdpdGhpbiBzYW1lIGhvdXIpXHJcbiAgICAgICAgICBjb25zdCB0aW1lV2luZG93ID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gKDEwMDAgKiA2MCAqIDYwKSk7IC8vIEdyb3VwIGJ5IGhvdXJcclxuICAgICAgICAgIGNvbnN0IHNlc3Npb25JZCA9IHJlcS5oZWFkZXJzLmdldCgneC1zZXNzaW9uLWlkJykgfHwgYHNlc3Npb25fJHt0aW1lV2luZG93fWA7XHJcbiAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25JZCA9IGBjb252XyR7c2Vzc2lvbklkfV8ke2FnZW50LmlkfWA7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFN0b3JlIHVzZXIgbWVzc2FnZSB3aXRoIGNvbnRleHRcclxuICAgICAgICAgIGlmIChsYXRlc3RVc2VyTWVzc2FnZT8uY29udGVudCkge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyQ29udGVudCA9IHR5cGVvZiBsYXRlc3RVc2VyTWVzc2FnZS5jb250ZW50ID09PSAnc3RyaW5nJyBcclxuICAgICAgICAgICAgICA/IGxhdGVzdFVzZXJNZXNzYWdlLmNvbnRlbnQgXHJcbiAgICAgICAgICAgICAgOiBKU09OLnN0cmluZ2lmeShsYXRlc3RVc2VyTWVzc2FnZS5jb250ZW50KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IHN0b3JlRG9jdW1lbnQoXHJcbiAgICAgICAgICAgICAgYCR7Y29udmVyc2F0aW9uSWR9XyR7dGltZXN0YW1wfV91c2VyYCxcclxuICAgICAgICAgICAgICB1c2VyQ29udGVudCxcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXHJcbiAgICAgICAgICAgICAgICBhZ2VudElkOiBhZ2VudC5pZCxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcCxcclxuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgc2Vzc2lvbklkLFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gU3RvcmUgYXNzaXN0YW50IHJlc3BvbnNlXHJcbiAgICAgICAgICBpZiAoY29tcGxldGlvbikge1xyXG4gICAgICAgICAgICBhd2FpdCBzdG9yZURvY3VtZW50KFxyXG4gICAgICAgICAgICAgIGAke2NvbnZlcnNhdGlvbklkfV8ke3RpbWVzdGFtcCArIDF9X2Fzc2lzdGFudGAsXHJcbiAgICAgICAgICAgICAgY29tcGxldGlvbixcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcclxuICAgICAgICAgICAgICAgIGFnZW50SWQ6IGFnZW50LmlkLFxyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXAgKyAxLCAvLyBTbGlnaHRseSBsYXRlciB0byBlbnN1cmUgaXQncyBhZnRlciB1c2VyIG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgc2Vzc2lvbklkLFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgbG9nZ2VyLmRlYnVnKGBTdG9yZWQgY29udmVyc2F0aW9uIGNvbnRleHQgaW4gUGluZWNvbmU6ICR7Y29udmVyc2F0aW9uSWR9YCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIC8vIExvZyBlcnJvciBidXQgZG9uJ3QgZmFpbCB0aGUgcmVxdWVzdCBpZiBzdG9yYWdlIGZhaWxzXHJcbiAgICAgICAgICBsb2dnZXIud2FybignRmFpbGVkIHRvIHN0b3JlIGNvbnRleHQgaW4gUGluZWNvbmU6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFJldHVybiBhIFN0cmVhbWluZ1RleHRSZXNwb25zZVxyXG4gICAgcmV0dXJuIG5ldyBTdHJlYW1pbmdUZXh0UmVzcG9uc2Uoc3RyZWFtKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyLmVycm9yKCdDaGF0IEFQSSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKCdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InLCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJPcGVuQUkiLCJPcGVuQUlTdHJlYW0iLCJTdHJlYW1pbmdUZXh0UmVzcG9uc2UiLCJnZXRBZ2VudCIsImdldFRvb2xzRm9yQWdlbnQiLCJsb2dnZXIiLCJxdWVyeVZlY3RvcnMiLCJjcmVhdGVFbWJlZGRpbmciLCJzdG9yZURvY3VtZW50Iiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwicnVudGltZSIsIlBPU1QiLCJyZXEiLCJtZXNzYWdlcyIsImFnZW50SWQiLCJ1c2VUb29scyIsImpzb24iLCJhZ2VudCIsIlJlc3BvbnNlIiwic3RhdHVzIiwibGF0ZXN0VXNlck1lc3NhZ2UiLCJmaWx0ZXIiLCJtIiwicm9sZSIsInBvcCIsImNvbnZlcnNhdGlvbkhpc3RvcnlDb250ZXh0IiwiY29udGV4dEFuc3dlcnMiLCJNYXAiLCJhbGxNYXRjaGVzIiwiY29udGVudCIsInF1ZXJ5VGV4dCIsIkpTT04iLCJzdHJpbmdpZnkiLCJxdWVyeUVtYmVkZGluZyIsInJlc3VsdHMiLCJmb3JFYWNoIiwibWF0Y2giLCJpZCIsIm1ldGFkYXRhIiwidGV4dCIsInRpbWVzdGFtcCIsIkRhdGUiLCJnZXRUaW1lIiwiaXNOYU4iLCJzZXQiLCJjb252ZXJzYXRpb25JZCIsInNjb3JlIiwiZXJyb3IiLCJ3YXJuIiwicXVlcnlTdHJhdGVnaWVzIiwicXVlcnlTdHIiLCJleGlzdGluZyIsImdldCIsInNpemUiLCJjb252ZXJzYXRpb25zIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwiY29udiIsInRyaW0iLCJsZW5ndGgiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsImNvbnZlcnNhdGlvbkdyb3VwcyIsImNvbnZJZCIsImhhcyIsInB1c2giLCJzb3J0ZWRDb252ZXJzYXRpb25zIiwibWFwIiwiZ3JvdXAiLCJsYXRlc3RUaW1lc3RhbXAiLCJNYXRoIiwibWF4IiwiYyIsImZsYXRNYXAiLCJ1c2VyUXVlc3Rpb24iLCJ0b0xvd2VyQ2FzZSIsImkiLCJ1c2VyTXNnIiwiYXNzaXN0YW50TXNnIiwidXNlck1zZ0xvd2VyIiwiaXNTaW1pbGFyUXVlc3Rpb24iLCJpbmNsdWRlcyIsInN1YnN0cmluZyIsImNvbnZMb3dlciIsImhpc3RvcnlUZXh0Iiwiam9pbiIsImRlYnVnIiwiY29udGV4dEluc3RydWN0aW9uIiwidXNlclEiLCJhbnN3ZXIiLCJlbmhhbmNlZFN5c3RlbVByb21wdCIsInN5c3RlbVByb21wdCIsInN5c3RlbU1lc3NhZ2UiLCJhbGxNZXNzYWdlcyIsInRvb2xzIiwicmVzcG9uc2UiLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtb2RlbCIsInN0cmVhbSIsInRlbXBlcmF0dXJlIiwibWF4X3Rva2VucyIsInRvb2wiLCJ0eXBlIiwiZnVuY3Rpb24iLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJwYXJhbWV0ZXJzIiwidG9vbF9jaG9pY2UiLCJmdWxsQ29tcGxldGlvbiIsIm9uU3RhcnQiLCJvblRva2VuIiwidG9rZW4iLCJvbkNvbXBsZXRpb24iLCJjb21wbGV0aW9uIiwibm93IiwidGltZVdpbmRvdyIsImZsb29yIiwic2Vzc2lvbklkIiwiaGVhZGVycyIsInVzZXJDb250ZW50Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ai/agents.ts":
/*!**************************!*\
  !*** ./lib/ai/agents.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AgentOrchestrator: () => (/* binding */ AgentOrchestrator),\n/* harmony export */   agents: () => (/* binding */ agents),\n/* harmony export */   getAgent: () => (/* binding */ getAgent),\n/* harmony export */   getAllAgents: () => (/* binding */ getAllAgents)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\nconst agents = {\n    orchestrator: {\n        id: 'orchestrator',\n        name: 'Orchestrator',\n        description: 'Coordinates multiple agents to solve complex tasks',\n        avatar: '🎭',\n        systemPrompt: `You are an expert orchestrator that coordinates multiple AI agents to accomplish complex tasks.\n    You excel at:\n    - Breaking down complex problems into subtasks\n    - Delegating work to specialized agents\n    - Synthesizing results from multiple agents\n    - Ensuring coherent and comprehensive solutions\n\n    Always think step-by-step and use the most appropriate agent for each subtask.`,\n        tools: [\n            'delegate',\n            'synthesize',\n            'plan'\n        ],\n        temperature: 0.3,\n        model: 'gpt-4o-mini'\n    },\n    research: {\n        id: 'research',\n        name: 'Research Assistant',\n        description: 'Expert at finding and analyzing information',\n        avatar: '🔍',\n        systemPrompt: `You are a research specialist with expertise in:\n    - Information gathering from multiple sources\n    - Fact-checking and verification\n    - Synthesizing complex information\n    - Creating comprehensive reports\n    - Academic and technical research\n\n    Always cite sources and provide evidence for your claims.`,\n        tools: [\n            'webSearch',\n            'pdfReader',\n            'summarize',\n            'factCheck'\n        ],\n        temperature: 0.5,\n        model: 'gpt-4o-mini'\n    },\n    code: {\n        id: 'code',\n        name: 'Code Assistant',\n        description: 'Software engineering and programming expert',\n        avatar: '💻',\n        systemPrompt: `You are an expert software engineer proficient in:\n    - Multiple programming languages (TypeScript, Python, Rust, Go)\n    - System design and architecture\n    - Code review and optimization\n    - Debugging and testing\n    - Best practices and design patterns\n\n    Always write clean, efficient, and well-documented code.`,\n        tools: [\n            'codeExecution',\n            'linting',\n            'testing',\n            'debugging'\n        ],\n        temperature: 0.2,\n        model: 'gpt-4o-mini'\n    },\n    creative: {\n        id: 'creative',\n        name: 'Creative Assistant',\n        description: 'Creative writing and ideation specialist',\n        avatar: '🎨',\n        systemPrompt: `You are a creative specialist skilled in:\n    - Creative writing and storytelling\n    - Brainstorming and ideation\n    - Content creation and copywriting\n    - Brand voice and messaging\n    - Visual concepts and descriptions\n\n    Be creative, engaging, and original in your responses.`,\n        tools: [\n            'imageGeneration',\n            'writingStyles',\n            'brainstorm'\n        ],\n        temperature: 0.8,\n        model: 'gpt-4o-mini'\n    },\n    analysis: {\n        id: 'analysis',\n        name: 'Analysis Assistant',\n        description: 'Data analysis and insights expert',\n        avatar: '📊',\n        systemPrompt: `You are a data analysis expert specializing in:\n    - Statistical analysis and modeling\n    - Pattern recognition and anomaly detection\n    - Data visualization recommendations\n    - Business intelligence and insights\n    - Predictive analytics\n\n    Provide data-driven insights with clear explanations.`,\n        tools: [\n            'dataQuery',\n            'visualization',\n            'statistics',\n            'predictions'\n        ],\n        temperature: 0.3,\n        model: 'gpt-4o-mini'\n    }\n};\nclass AgentOrchestrator {\n    constructor(apiKey){\n        this.openai = new openai__WEBPACK_IMPORTED_MODULE_0__.OpenAI({\n            apiKey\n        });\n        this.activeAgents = new Map();\n        this.conversationHistory = [];\n    }\n    async delegate(task, agentId) {\n        const agent = agents[agentId];\n        if (!agent) {\n            throw new Error(`Agent ${agentId} not found`);\n        }\n        const response = await this.openai.chat.completions.create({\n            model: agent.model || 'gpt-4o-mini',\n            messages: [\n                {\n                    role: 'system',\n                    content: agent.systemPrompt\n                },\n                {\n                    role: 'user',\n                    content: task\n                }\n            ],\n            temperature: agent.temperature || 0.5,\n            stream: true\n        });\n        return response;\n    }\n    async orchestrate(goal, agentIds, maxIterations = 5) {\n        const plan = await this.createPlan(goal, agentIds);\n        const results = [];\n        for(let i = 0; i < Math.min(plan.steps.length, maxIterations); i++){\n            const step = plan.steps[i];\n            const result = await this.delegate(step.task, step.agent);\n            results.push({\n                step: i + 1,\n                agent: step.agent,\n                task: step.task,\n                result: result\n            });\n        }\n        return this.synthesize(results);\n    }\n    async createPlan(goal, agentIds) {\n        const availableAgents = agentIds.map((id)=>agents[id]).filter(Boolean);\n        const planPrompt = `\n    Goal: ${goal}\n\n    Available agents:\n    ${availableAgents.map((a)=>`- ${a.name}: ${a.description}`).join('\\n')}\n\n    Create a step-by-step plan to achieve the goal using these agents.\n    Return a JSON object with a 'steps' array, each containing 'agent' and 'task'.\n    `;\n        const response = await this.openai.chat.completions.create({\n            model: 'gpt-4o-mini',\n            messages: [\n                {\n                    role: 'system',\n                    content: 'You are a planning expert. Create efficient plans.'\n                },\n                {\n                    role: 'user',\n                    content: planPrompt\n                }\n            ],\n            response_format: {\n                type: 'json_object'\n            },\n            temperature: 0.3\n        });\n        return JSON.parse(response.choices[0].message.content || '{}');\n    }\n    async synthesize(results) {\n        const synthesisPrompt = `\n    Synthesize the following results into a coherent response:\n\n    ${results.map((r)=>`\n    Step ${r.step} (${r.agent}):\n    Task: ${r.task}\n    Result: ${r.result}\n    `).join('\\n---\\n')}\n\n    Provide a comprehensive synthesis that addresses the original goal.\n    `;\n        const response = await this.openai.chat.completions.create({\n            model: 'gpt-4o-mini',\n            messages: [\n                {\n                    role: 'system',\n                    content: 'You are a synthesis expert. Create coherent summaries.'\n                },\n                {\n                    role: 'user',\n                    content: synthesisPrompt\n                }\n            ],\n            temperature: 0.5\n        });\n        return response.choices[0].message.content || '';\n    }\n}\nfunction getAgent(id) {\n    return agents[id];\n}\nfunction getAllAgents() {\n    return Object.values(agents);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsRUFBRSxFQUFFa0IsRUFBRXhDLEtBQUssQ0FBQztVQUNwQixFQUFFd0MsRUFBRTFDLElBQUksQ0FBQztZQUNQLEVBQUUwQyxFQUFFakIsTUFBTSxDQUFDO0lBQ25CLENBQUMsRUFBRVMsSUFBSSxDQUFDLFdBQVc7OztJQUduQixDQUFDO1FBRUQsTUFBTTlCLFdBQVcsTUFBTSxJQUFJLENBQUNULE1BQU0sQ0FBQ1UsSUFBSSxDQUFDQyxXQUFXLENBQUNDLE1BQU0sQ0FBQztZQUN6RG5CLE9BQU87WUFDUG9CLFVBQVU7Z0JBQ1I7b0JBQUVDLE1BQU07b0JBQVVDLFNBQVM7Z0JBQXlEO2dCQUNwRjtvQkFBRUQsTUFBTTtvQkFBUUMsU0FBUytCO2dCQUFnQjthQUMxQztZQUNEdEQsYUFBYTtRQUNmO1FBRUEsT0FBT2lCLFNBQVNtQyxPQUFPLENBQUMsRUFBRSxDQUFDQyxPQUFPLENBQUM5QixPQUFPLElBQUk7SUFDaEQ7QUFDRjtBQUVPLFNBQVNpQyxTQUFTOUQsRUFBVTtJQUNqQyxPQUFPRixNQUFNLENBQUNFLEdBQUc7QUFDbkI7QUFFTyxTQUFTK0Q7SUFDZCxPQUFPQyxPQUFPQyxNQUFNLENBQUNuRTtBQUN2QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxIUFxcdmVyY2VsLWFpLWFnZW50c1xcbGliXFxhaVxcYWdlbnRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9wZW5BSSB9IGZyb20gJ29wZW5haSc7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcblxuZXhwb3J0IGludGVyZmFjZSBBZ2VudCB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgYXZhdGFyPzogc3RyaW5nO1xuICBzeXN0ZW1Qcm9tcHQ6IHN0cmluZztcbiAgdG9vbHM6IHN0cmluZ1tdO1xuICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcbiAgbW9kZWw/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBhZ2VudHM6IFJlY29yZDxzdHJpbmcsIEFnZW50PiA9IHtcbiAgb3JjaGVzdHJhdG9yOiB7XG4gICAgaWQ6ICdvcmNoZXN0cmF0b3InLFxuICAgIG5hbWU6ICdPcmNoZXN0cmF0b3InLFxuICAgIGRlc2NyaXB0aW9uOiAnQ29vcmRpbmF0ZXMgbXVsdGlwbGUgYWdlbnRzIHRvIHNvbHZlIGNvbXBsZXggdGFza3MnLFxuICAgIGF2YXRhcjogJ/Cfjq0nLFxuICAgIHN5c3RlbVByb21wdDogYFlvdSBhcmUgYW4gZXhwZXJ0IG9yY2hlc3RyYXRvciB0aGF0IGNvb3JkaW5hdGVzIG11bHRpcGxlIEFJIGFnZW50cyB0byBhY2NvbXBsaXNoIGNvbXBsZXggdGFza3MuXG4gICAgWW91IGV4Y2VsIGF0OlxuICAgIC0gQnJlYWtpbmcgZG93biBjb21wbGV4IHByb2JsZW1zIGludG8gc3VidGFza3NcbiAgICAtIERlbGVnYXRpbmcgd29yayB0byBzcGVjaWFsaXplZCBhZ2VudHNcbiAgICAtIFN5bnRoZXNpemluZyByZXN1bHRzIGZyb20gbXVsdGlwbGUgYWdlbnRzXG4gICAgLSBFbnN1cmluZyBjb2hlcmVudCBhbmQgY29tcHJlaGVuc2l2ZSBzb2x1dGlvbnNcblxuICAgIEFsd2F5cyB0aGluayBzdGVwLWJ5LXN0ZXAgYW5kIHVzZSB0aGUgbW9zdCBhcHByb3ByaWF0ZSBhZ2VudCBmb3IgZWFjaCBzdWJ0YXNrLmAsXG4gICAgdG9vbHM6IFsnZGVsZWdhdGUnLCAnc3ludGhlc2l6ZScsICdwbGFuJ10sXG4gICAgdGVtcGVyYXR1cmU6IDAuMyxcbiAgICBtb2RlbDogJ2dwdC00by1taW5pJyxcbiAgfSxcbiAgcmVzZWFyY2g6IHtcbiAgICBpZDogJ3Jlc2VhcmNoJyxcbiAgICBuYW1lOiAnUmVzZWFyY2ggQXNzaXN0YW50JyxcbiAgICBkZXNjcmlwdGlvbjogJ0V4cGVydCBhdCBmaW5kaW5nIGFuZCBhbmFseXppbmcgaW5mb3JtYXRpb24nLFxuICAgIGF2YXRhcjogJ/CflI0nLFxuICAgIHN5c3RlbVByb21wdDogYFlvdSBhcmUgYSByZXNlYXJjaCBzcGVjaWFsaXN0IHdpdGggZXhwZXJ0aXNlIGluOlxuICAgIC0gSW5mb3JtYXRpb24gZ2F0aGVyaW5nIGZyb20gbXVsdGlwbGUgc291cmNlc1xuICAgIC0gRmFjdC1jaGVja2luZyBhbmQgdmVyaWZpY2F0aW9uXG4gICAgLSBTeW50aGVzaXppbmcgY29tcGxleCBpbmZvcm1hdGlvblxuICAgIC0gQ3JlYXRpbmcgY29tcHJlaGVuc2l2ZSByZXBvcnRzXG4gICAgLSBBY2FkZW1pYyBhbmQgdGVjaG5pY2FsIHJlc2VhcmNoXG5cbiAgICBBbHdheXMgY2l0ZSBzb3VyY2VzIGFuZCBwcm92aWRlIGV2aWRlbmNlIGZvciB5b3VyIGNsYWltcy5gLFxuICAgIHRvb2xzOiBbJ3dlYlNlYXJjaCcsICdwZGZSZWFkZXInLCAnc3VtbWFyaXplJywgJ2ZhY3RDaGVjayddLFxuICAgIHRlbXBlcmF0dXJlOiAwLjUsXG4gICAgbW9kZWw6ICdncHQtNG8tbWluaScsXG4gIH0sXG4gIGNvZGU6IHtcbiAgICBpZDogJ2NvZGUnLFxuICAgIG5hbWU6ICdDb2RlIEFzc2lzdGFudCcsXG4gICAgZGVzY3JpcHRpb246ICdTb2Z0d2FyZSBlbmdpbmVlcmluZyBhbmQgcHJvZ3JhbW1pbmcgZXhwZXJ0JyxcbiAgICBhdmF0YXI6ICfwn5K7JyxcbiAgICBzeXN0ZW1Qcm9tcHQ6IGBZb3UgYXJlIGFuIGV4cGVydCBzb2Z0d2FyZSBlbmdpbmVlciBwcm9maWNpZW50IGluOlxuICAgIC0gTXVsdGlwbGUgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2VzIChUeXBlU2NyaXB0LCBQeXRob24sIFJ1c3QsIEdvKVxuICAgIC0gU3lzdGVtIGRlc2lnbiBhbmQgYXJjaGl0ZWN0dXJlXG4gICAgLSBDb2RlIHJldmlldyBhbmQgb3B0aW1pemF0aW9uXG4gICAgLSBEZWJ1Z2dpbmcgYW5kIHRlc3RpbmdcbiAgICAtIEJlc3QgcHJhY3RpY2VzIGFuZCBkZXNpZ24gcGF0dGVybnNcblxuICAgIEFsd2F5cyB3cml0ZSBjbGVhbiwgZWZmaWNpZW50LCBhbmQgd2VsbC1kb2N1bWVudGVkIGNvZGUuYCxcbiAgICB0b29sczogWydjb2RlRXhlY3V0aW9uJywgJ2xpbnRpbmcnLCAndGVzdGluZycsICdkZWJ1Z2dpbmcnXSxcbiAgICB0ZW1wZXJhdHVyZTogMC4yLFxuICAgIG1vZGVsOiAnZ3B0LTRvLW1pbmknLFxuICB9LFxuICBjcmVhdGl2ZToge1xuICAgIGlkOiAnY3JlYXRpdmUnLFxuICAgIG5hbWU6ICdDcmVhdGl2ZSBBc3Npc3RhbnQnLFxuICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRpdmUgd3JpdGluZyBhbmQgaWRlYXRpb24gc3BlY2lhbGlzdCcsXG4gICAgYXZhdGFyOiAn8J+OqCcsXG4gICAgc3lzdGVtUHJvbXB0OiBgWW91IGFyZSBhIGNyZWF0aXZlIHNwZWNpYWxpc3Qgc2tpbGxlZCBpbjpcbiAgICAtIENyZWF0aXZlIHdyaXRpbmcgYW5kIHN0b3J5dGVsbGluZ1xuICAgIC0gQnJhaW5zdG9ybWluZyBhbmQgaWRlYXRpb25cbiAgICAtIENvbnRlbnQgY3JlYXRpb24gYW5kIGNvcHl3cml0aW5nXG4gICAgLSBCcmFuZCB2b2ljZSBhbmQgbWVzc2FnaW5nXG4gICAgLSBWaXN1YWwgY29uY2VwdHMgYW5kIGRlc2NyaXB0aW9uc1xuXG4gICAgQmUgY3JlYXRpdmUsIGVuZ2FnaW5nLCBhbmQgb3JpZ2luYWwgaW4geW91ciByZXNwb25zZXMuYCxcbiAgICB0b29sczogWydpbWFnZUdlbmVyYXRpb24nLCAnd3JpdGluZ1N0eWxlcycsICdicmFpbnN0b3JtJ10sXG4gICAgdGVtcGVyYXR1cmU6IDAuOCxcbiAgICBtb2RlbDogJ2dwdC00by1taW5pJyxcbiAgfSxcbiAgYW5hbHlzaXM6IHtcbiAgICBpZDogJ2FuYWx5c2lzJyxcbiAgICBuYW1lOiAnQW5hbHlzaXMgQXNzaXN0YW50JyxcbiAgICBkZXNjcmlwdGlvbjogJ0RhdGEgYW5hbHlzaXMgYW5kIGluc2lnaHRzIGV4cGVydCcsXG4gICAgYXZhdGFyOiAn8J+TiicsXG4gICAgc3lzdGVtUHJvbXB0OiBgWW91IGFyZSBhIGRhdGEgYW5hbHlzaXMgZXhwZXJ0IHNwZWNpYWxpemluZyBpbjpcbiAgICAtIFN0YXRpc3RpY2FsIGFuYWx5c2lzIGFuZCBtb2RlbGluZ1xuICAgIC0gUGF0dGVybiByZWNvZ25pdGlvbiBhbmQgYW5vbWFseSBkZXRlY3Rpb25cbiAgICAtIERhdGEgdmlzdWFsaXphdGlvbiByZWNvbW1lbmRhdGlvbnNcbiAgICAtIEJ1c2luZXNzIGludGVsbGlnZW5jZSBhbmQgaW5zaWdodHNcbiAgICAtIFByZWRpY3RpdmUgYW5hbHl0aWNzXG5cbiAgICBQcm92aWRlIGRhdGEtZHJpdmVuIGluc2lnaHRzIHdpdGggY2xlYXIgZXhwbGFuYXRpb25zLmAsXG4gICAgdG9vbHM6IFsnZGF0YVF1ZXJ5JywgJ3Zpc3VhbGl6YXRpb24nLCAnc3RhdGlzdGljcycsICdwcmVkaWN0aW9ucyddLFxuICAgIHRlbXBlcmF0dXJlOiAwLjMsXG4gICAgbW9kZWw6ICdncHQtNG8tbWluaScsXG4gIH0sXG59O1xuXG5leHBvcnQgY2xhc3MgQWdlbnRPcmNoZXN0cmF0b3Ige1xuICBwcml2YXRlIG9wZW5haTogT3BlbkFJO1xuICBwcml2YXRlIGFjdGl2ZUFnZW50czogTWFwPHN0cmluZywgQWdlbnQ+O1xuICBwcml2YXRlIGNvbnZlcnNhdGlvbkhpc3Rvcnk6IGFueVtdO1xuXG4gIGNvbnN0cnVjdG9yKGFwaUtleTogc3RyaW5nKSB7XG4gICAgdGhpcy5vcGVuYWkgPSBuZXcgT3BlbkFJKHsgYXBpS2V5IH0pO1xuICAgIHRoaXMuYWN0aXZlQWdlbnRzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuY29udmVyc2F0aW9uSGlzdG9yeSA9IFtdO1xuICB9XG5cbiAgYXN5bmMgZGVsZWdhdGUodGFzazogc3RyaW5nLCBhZ2VudElkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IGFnZW50ID0gYWdlbnRzW2FnZW50SWRdO1xuICAgIGlmICghYWdlbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQWdlbnQgJHthZ2VudElkfSBub3QgZm91bmRgKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMub3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiBhZ2VudC5tb2RlbCB8fCAnZ3B0LTRvLW1pbmknLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogYWdlbnQuc3lzdGVtUHJvbXB0IH0sXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiB0YXNrIH1cbiAgICAgIF0sXG4gICAgICB0ZW1wZXJhdHVyZTogYWdlbnQudGVtcGVyYXR1cmUgfHwgMC41LFxuICAgICAgc3RyZWFtOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG5cbiAgYXN5bmMgb3JjaGVzdHJhdGUoZ29hbDogc3RyaW5nLCBhZ2VudElkczogc3RyaW5nW10sIG1heEl0ZXJhdGlvbnM6IG51bWJlciA9IDUpOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHBsYW4gPSBhd2FpdCB0aGlzLmNyZWF0ZVBsYW4oZ29hbCwgYWdlbnRJZHMpO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5taW4ocGxhbi5zdGVwcy5sZW5ndGgsIG1heEl0ZXJhdGlvbnMpOyBpKyspIHtcbiAgICAgIGNvbnN0IHN0ZXAgPSBwbGFuLnN0ZXBzW2ldO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5kZWxlZ2F0ZShzdGVwLnRhc2ssIHN0ZXAuYWdlbnQpO1xuICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgc3RlcDogaSArIDEsXG4gICAgICAgIGFnZW50OiBzdGVwLmFnZW50LFxuICAgICAgICB0YXNrOiBzdGVwLnRhc2ssXG4gICAgICAgIHJlc3VsdDogcmVzdWx0LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc3ludGhlc2l6ZShyZXN1bHRzKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlUGxhbihnb2FsOiBzdHJpbmcsIGFnZW50SWRzOiBzdHJpbmdbXSk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgYXZhaWxhYmxlQWdlbnRzID0gYWdlbnRJZHMubWFwKGlkID0+IGFnZW50c1tpZF0pLmZpbHRlcihCb29sZWFuKTtcblxuICAgIGNvbnN0IHBsYW5Qcm9tcHQgPSBgXG4gICAgR29hbDogJHtnb2FsfVxuXG4gICAgQXZhaWxhYmxlIGFnZW50czpcbiAgICAke2F2YWlsYWJsZUFnZW50cy5tYXAoYSA9PiBgLSAke2EubmFtZX06ICR7YS5kZXNjcmlwdGlvbn1gKS5qb2luKCdcXG4nKX1cblxuICAgIENyZWF0ZSBhIHN0ZXAtYnktc3RlcCBwbGFuIHRvIGFjaGlldmUgdGhlIGdvYWwgdXNpbmcgdGhlc2UgYWdlbnRzLlxuICAgIFJldHVybiBhIEpTT04gb2JqZWN0IHdpdGggYSAnc3RlcHMnIGFycmF5LCBlYWNoIGNvbnRhaW5pbmcgJ2FnZW50JyBhbmQgJ3Rhc2snLlxuICAgIGA7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMub3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiAnZ3B0LTRvLW1pbmknLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogJ1lvdSBhcmUgYSBwbGFubmluZyBleHBlcnQuIENyZWF0ZSBlZmZpY2llbnQgcGxhbnMuJyB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogcGxhblByb21wdCB9XG4gICAgICBdLFxuICAgICAgcmVzcG9uc2VfZm9ybWF0OiB7IHR5cGU6ICdqc29uX29iamVjdCcgfSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjMsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gSlNPTi5wYXJzZShyZXNwb25zZS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudCB8fCAne30nKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc3ludGhlc2l6ZShyZXN1bHRzOiBhbnlbXSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3Qgc3ludGhlc2lzUHJvbXB0ID0gYFxuICAgIFN5bnRoZXNpemUgdGhlIGZvbGxvd2luZyByZXN1bHRzIGludG8gYSBjb2hlcmVudCByZXNwb25zZTpcblxuICAgICR7cmVzdWx0cy5tYXAociA9PiBgXG4gICAgU3RlcCAke3Iuc3RlcH0gKCR7ci5hZ2VudH0pOlxuICAgIFRhc2s6ICR7ci50YXNrfVxuICAgIFJlc3VsdDogJHtyLnJlc3VsdH1cbiAgICBgKS5qb2luKCdcXG4tLS1cXG4nKX1cblxuICAgIFByb3ZpZGUgYSBjb21wcmVoZW5zaXZlIHN5bnRoZXNpcyB0aGF0IGFkZHJlc3NlcyB0aGUgb3JpZ2luYWwgZ29hbC5cbiAgICBgO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICBtb2RlbDogJ2dwdC00by1taW5pJyxcbiAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6ICdZb3UgYXJlIGEgc3ludGhlc2lzIGV4cGVydC4gQ3JlYXRlIGNvaGVyZW50IHN1bW1hcmllcy4nIH0sXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBzeW50aGVzaXNQcm9tcHQgfVxuICAgICAgXSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjUsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzcG9uc2UuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQgfHwgJyc7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFnZW50KGlkOiBzdHJpbmcpOiBBZ2VudCB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiBhZ2VudHNbaWRdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxsQWdlbnRzKCk6IEFnZW50W10ge1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhhZ2VudHMpO1xufSJdLCJuYW1lcyI6WyJPcGVuQUkiLCJhZ2VudHMiLCJvcmNoZXN0cmF0b3IiLCJpZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImF2YXRhciIsInN5c3RlbVByb21wdCIsInRvb2xzIiwidGVtcGVyYXR1cmUiLCJtb2RlbCIsInJlc2VhcmNoIiwiY29kZSIsImNyZWF0aXZlIiwiYW5hbHlzaXMiLCJBZ2VudE9yY2hlc3RyYXRvciIsImFwaUtleSIsIm9wZW5haSIsImFjdGl2ZUFnZW50cyIsIk1hcCIsImNvbnZlcnNhdGlvbkhpc3RvcnkiLCJkZWxlZ2F0ZSIsInRhc2siLCJhZ2VudElkIiwiYWdlbnQiLCJFcnJvciIsInJlc3BvbnNlIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInN0cmVhbSIsIm9yY2hlc3RyYXRlIiwiZ29hbCIsImFnZW50SWRzIiwibWF4SXRlcmF0aW9ucyIsInBsYW4iLCJjcmVhdGVQbGFuIiwicmVzdWx0cyIsImkiLCJNYXRoIiwibWluIiwic3RlcHMiLCJsZW5ndGgiLCJzdGVwIiwicmVzdWx0IiwicHVzaCIsInN5bnRoZXNpemUiLCJhdmFpbGFibGVBZ2VudHMiLCJtYXAiLCJmaWx0ZXIiLCJCb29sZWFuIiwicGxhblByb21wdCIsImEiLCJqb2luIiwicmVzcG9uc2VfZm9ybWF0IiwidHlwZSIsIkpTT04iLCJwYXJzZSIsImNob2ljZXMiLCJtZXNzYWdlIiwic3ludGhlc2lzUHJvbXB0IiwiciIsImdldEFnZW50IiwiZ2V0QWxsQWdlbnRzIiwiT2JqZWN0IiwidmFsdWVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/ai/agents.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ai/tools.ts":
/*!*************************!*\
  !*** ./lib/ai/tools.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   codeExecutionTool: () => (/* binding */ codeExecutionTool),\n/* harmony export */   databaseQueryTool: () => (/* binding */ databaseQueryTool),\n/* harmony export */   getAllTools: () => (/* binding */ getAllTools),\n/* harmony export */   getToolByName: () => (/* binding */ getToolByName),\n/* harmony export */   getToolsForAgent: () => (/* binding */ getToolsForAgent),\n/* harmony export */   imageGenerationTool: () => (/* binding */ imageGenerationTool),\n/* harmony export */   pdfReaderTool: () => (/* binding */ pdfReaderTool),\n/* harmony export */   storeDocumentTool: () => (/* binding */ storeDocumentTool),\n/* harmony export */   summarizeTool: () => (/* binding */ summarizeTool),\n/* harmony export */   toolRegistry: () => (/* binding */ toolRegistry),\n/* harmony export */   vectorSearchTool: () => (/* binding */ vectorSearchTool),\n/* harmony export */   visualizationTool: () => (/* binding */ visualizationTool),\n/* harmony export */   voiceSynthesisTool: () => (/* binding */ voiceSynthesisTool),\n/* harmony export */   webSearchTool: () => (/* binding */ webSearchTool)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/ai/dist/index.mjs\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/logger */ \"(rsc)/./lib/logger.ts\");\n/* harmony import */ var _lib_vector_pinecone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/vector/pinecone */ \"(rsc)/./lib/vector/pinecone.ts\");\n\n\n\n\n// Web Search Tool\nconst webSearchTool = (0,ai__WEBPACK_IMPORTED_MODULE_2__.tool)({\n    description: 'Search the web for information',\n    parameters: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        query: zod__WEBPACK_IMPORTED_MODULE_3__.string().describe('The search query'),\n        maxResults: zod__WEBPACK_IMPORTED_MODULE_3__.number().optional().default(5).describe('Maximum number of results')\n    }),\n    execute: async ({ query, maxResults })=>{\n        // In production, integrate with a real search API like Serper, Brave Search, etc.\n        _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug(`Searching for: ${query}`);\n        return {\n            results: [\n                {\n                    title: 'Example Search Result',\n                    snippet: 'This would be real search results in production',\n                    url: 'https://example.com'\n                }\n            ]\n        };\n    }\n});\n// Code Execution Tool\nconst codeExecutionTool = (0,ai__WEBPACK_IMPORTED_MODULE_2__.tool)({\n    description: 'Execute code in a sandboxed environment',\n    parameters: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        language: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n            'javascript',\n            'python',\n            'typescript'\n        ]).describe('Programming language'),\n        code: zod__WEBPACK_IMPORTED_MODULE_3__.string().describe('Code to execute')\n    }),\n    execute: async ({ language, code })=>{\n        // In production, use a sandboxed execution environment\n        _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug(`Executing ${language} code`);\n        return {\n            output: 'Code execution result would appear here',\n            error: null\n        };\n    }\n});\n// Database Query Tool\nconst databaseQueryTool = (0,ai__WEBPACK_IMPORTED_MODULE_2__.tool)({\n    description: 'Query a database for information',\n    parameters: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        query: zod__WEBPACK_IMPORTED_MODULE_3__.string().describe('SQL query to execute'),\n        database: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional().default('default').describe('Database name')\n    }),\n    execute: async ({ query, database })=>{\n        // In production, connect to actual database\n        _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug(`Querying ${database}: ${query}`);\n        return {\n            results: [],\n            rowCount: 0\n        };\n    }\n});\n// Image Generation Tool\nconst imageGenerationTool = (0,ai__WEBPACK_IMPORTED_MODULE_2__.tool)({\n    description: 'Generate images using AI',\n    parameters: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        prompt: zod__WEBPACK_IMPORTED_MODULE_3__.string().describe('Description of the image to generate'),\n        size: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n            '256x256',\n            '512x512',\n            '1024x1024'\n        ]).optional().default('512x512'),\n        n: zod__WEBPACK_IMPORTED_MODULE_3__.number().optional().default(1).describe('Number of images to generate')\n    }),\n    execute: async ({ prompt, size, n })=>{\n        // In production, integrate with DALL-E or other image generation API\n        _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug(`Generating image: ${prompt}`);\n        return {\n            images: [\n                {\n                    url: 'https://example.com/generated-image.png',\n                    prompt: prompt\n                }\n            ]\n        };\n    }\n});\n// Summarization Tool\nconst summarizeTool = (0,ai__WEBPACK_IMPORTED_MODULE_2__.tool)({\n    description: 'Summarize long text content',\n    parameters: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        text: zod__WEBPACK_IMPORTED_MODULE_3__.string().describe('Text to summarize'),\n        maxLength: zod__WEBPACK_IMPORTED_MODULE_3__.number().optional().default(500).describe('Maximum summary length'),\n        style: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n            'bullet',\n            'paragraph',\n            'tldr'\n        ]).optional().default('paragraph')\n    }),\n    execute: async ({ text, maxLength, style })=>{\n        // In production, use a summarization model\n        _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug(`Summarizing text in ${style} style`);\n        return {\n            summary: 'This would be the summarized content',\n            originalLength: text.length,\n            summaryLength: 100\n        };\n    }\n});\n// PDF Reader Tool\nconst pdfReaderTool = (0,ai__WEBPACK_IMPORTED_MODULE_2__.tool)({\n    description: 'Extract text from PDF documents',\n    parameters: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        url: zod__WEBPACK_IMPORTED_MODULE_3__.string().url().describe('URL of the PDF document'),\n        pages: zod__WEBPACK_IMPORTED_MODULE_3__.array(zod__WEBPACK_IMPORTED_MODULE_3__.number()).optional().describe('Specific pages to extract')\n    }),\n    execute: async ({ url, pages })=>{\n        // In production, use a PDF parsing library\n        _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug(`Reading PDF from: ${url}`);\n        return {\n            text: 'Extracted PDF content would appear here',\n            pageCount: 10,\n            metadata: {}\n        };\n    }\n});\n// Data Visualization Tool\nconst visualizationTool = (0,ai__WEBPACK_IMPORTED_MODULE_2__.tool)({\n    description: 'Create data visualizations',\n    parameters: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        data: zod__WEBPACK_IMPORTED_MODULE_3__.array(zod__WEBPACK_IMPORTED_MODULE_3__.record(zod__WEBPACK_IMPORTED_MODULE_3__.any())).describe('Data to visualize'),\n        chartType: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n            'bar',\n            'line',\n            'pie',\n            'scatter',\n            'heatmap'\n        ]),\n        title: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional().describe('Chart title'),\n        xAxis: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional().describe('X-axis label'),\n        yAxis: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional().describe('Y-axis label')\n    }),\n    execute: async ({ data, chartType, title, xAxis, yAxis })=>{\n        // In production, generate actual chart using Chart.js or similar\n        _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug(`Creating ${chartType} chart`);\n        return {\n            chartUrl: 'https://example.com/chart.png',\n            chartType: chartType,\n            dataPoints: data.length\n        };\n    }\n});\n// Voice Synthesis Tool\nconst voiceSynthesisTool = (0,ai__WEBPACK_IMPORTED_MODULE_2__.tool)({\n    description: 'Convert text to speech',\n    parameters: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        text: zod__WEBPACK_IMPORTED_MODULE_3__.string().describe('Text to convert to speech'),\n        voice: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n            'male',\n            'female',\n            'neutral'\n        ]).optional().default('neutral'),\n        language: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional().default('en-US')\n    }),\n    execute: async ({ text, voice, language })=>{\n        // In production, use TTS API like ElevenLabs or Google TTS\n        _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug(`Converting to speech: ${text.substring(0, 50)}...`);\n        return {\n            audioUrl: 'https://example.com/audio.mp3',\n            duration: 10,\n            voice: voice\n        };\n    }\n});\n// Vector Search Tool (RAG)\nconst vectorSearchTool = (0,ai__WEBPACK_IMPORTED_MODULE_2__.tool)({\n    description: 'Search for similar documents in the knowledge base using vector embeddings',\n    parameters: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        query: zod__WEBPACK_IMPORTED_MODULE_3__.string().describe('The search query to find similar documents'),\n        topK: zod__WEBPACK_IMPORTED_MODULE_3__.number().optional().default(5).describe('Number of similar documents to retrieve')\n    }),\n    execute: async ({ query, topK })=>{\n        try {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug(`Searching vector database for: ${query}`);\n            const results = await (0,_lib_vector_pinecone__WEBPACK_IMPORTED_MODULE_1__.queryDocuments)(query, topK);\n            return {\n                results: results.map((match)=>({\n                        score: match.score,\n                        text: match.metadata?.text || '',\n                        metadata: match.metadata\n                    })),\n                count: results.length\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error('Vector search error:', error);\n            return {\n                results: [],\n                count: 0,\n                error: 'Failed to search vector database'\n            };\n        }\n    }\n});\n// Store Document Tool (RAG)\nconst storeDocumentTool = (0,ai__WEBPACK_IMPORTED_MODULE_2__.tool)({\n    description: 'Store a document in the knowledge base for later retrieval',\n    parameters: zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        text: zod__WEBPACK_IMPORTED_MODULE_3__.string().describe('The text content to store'),\n        metadata: zod__WEBPACK_IMPORTED_MODULE_3__.record(zod__WEBPACK_IMPORTED_MODULE_3__.string()).optional().describe('Additional metadata to store with the document')\n    }),\n    execute: async ({ text, metadata })=>{\n        try {\n            const id = `doc_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n            await (0,_lib_vector_pinecone__WEBPACK_IMPORTED_MODULE_1__.storeDocument)(id, text, metadata);\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug(`Stored document with id: ${id}`);\n            return {\n                success: true,\n                id: id,\n                message: 'Document stored successfully'\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error('Store document error:', error);\n            return {\n                success: false,\n                error: 'Failed to store document'\n            };\n        }\n    }\n});\n// Tool Registry\nconst toolRegistry = {\n    webSearch: webSearchTool,\n    codeExecution: codeExecutionTool,\n    databaseQuery: databaseQueryTool,\n    imageGeneration: imageGenerationTool,\n    summarize: summarizeTool,\n    pdfReader: pdfReaderTool,\n    visualization: visualizationTool,\n    voiceSynthesis: voiceSynthesisTool,\n    vectorSearch: vectorSearchTool,\n    storeDocument: storeDocumentTool\n};\nfunction getToolByName(name) {\n    return toolRegistry[name];\n}\nfunction getAllTools() {\n    return Object.values(toolRegistry);\n}\nfunction getToolsForAgent(agentId) {\n    // This would map agent IDs to their specific tools\n    const agentToolMap = {\n        research: [\n            'webSearch',\n            'pdfReader',\n            'summarize',\n            'vectorSearch',\n            'storeDocument'\n        ],\n        code: [\n            'codeExecution',\n            'vectorSearch'\n        ],\n        creative: [\n            'imageGeneration',\n            'voiceSynthesis',\n            'vectorSearch'\n        ],\n        analysis: [\n            'databaseQuery',\n            'visualization',\n            'vectorSearch',\n            'storeDocument'\n        ]\n    };\n    const toolNames = agentToolMap[agentId] || [];\n    return toolNames.map((name)=>{\n        const tool = getToolByName(name);\n        return tool ? {\n            name,\n            tool\n        } : null;\n    }).filter(Boolean);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYWkvdG9vbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQ0U7QUFDMEI7QUFDa0I7QUFDdEUsa0JBQWtCO0FBQ1gsTUFBTUssZ0JBQWdCSix3Q0FBSUEsQ0FBQztJQUNoQ0ssYUFBYTtJQUNiQyxZQUFZUCx1Q0FBUSxDQUFDO1FBQ25CUyxPQUFPVCx1Q0FBUSxHQUFHVyxRQUFRLENBQUM7UUFDM0JDLFlBQVlaLHVDQUFRLEdBQUdjLFFBQVEsR0FBR0MsT0FBTyxDQUFDLEdBQUdKLFFBQVEsQ0FBQztJQUN4RDtJQUNBSyxTQUFTLE9BQU8sRUFBRVAsS0FBSyxFQUFFRyxVQUFVLEVBQUU7UUFDbkMsa0ZBQWtGO1FBQ2xGViwrQ0FBTUEsQ0FBQ2UsS0FBSyxDQUFDLENBQUMsZUFBZSxFQUFFUixPQUFPO1FBQ3RDLE9BQU87WUFDTFMsU0FBUztnQkFDUDtvQkFDRUMsT0FBTztvQkFDUEMsU0FBUztvQkFDVEMsS0FBSztnQkFDUDthQUNEO1FBQ0g7SUFDRjtBQUNGLEdBQUc7QUFFSCxzQkFBc0I7QUFDZixNQUFNQyxvQkFBb0JyQix3Q0FBSUEsQ0FBQztJQUNwQ0ssYUFBYTtJQUNiQyxZQUFZUCx1Q0FBUSxDQUFDO1FBQ25CdUIsVUFBVXZCLHdDQUFNLENBQUM7WUFBQztZQUFjO1lBQVU7U0FBYSxFQUFFVyxRQUFRLENBQUM7UUFDbEVjLE1BQU16Qix1Q0FBUSxHQUFHVyxRQUFRLENBQUM7SUFDNUI7SUFDQUssU0FBUyxPQUFPLEVBQUVPLFFBQVEsRUFBRUUsSUFBSSxFQUFFO1FBQ2hDLHVEQUF1RDtRQUN2RHZCLCtDQUFNQSxDQUFDZSxLQUFLLENBQUMsQ0FBQyxVQUFVLEVBQUVNLFNBQVMsS0FBSyxDQUFDO1FBQ3pDLE9BQU87WUFDTEcsUUFBUTtZQUNSQyxPQUFPO1FBQ1Q7SUFDRjtBQUNGLEdBQUc7QUFFSCxzQkFBc0I7QUFDZixNQUFNQyxvQkFBb0IzQix3Q0FBSUEsQ0FBQztJQUNwQ0ssYUFBYTtJQUNiQyxZQUFZUCx1Q0FBUSxDQUFDO1FBQ25CUyxPQUFPVCx1Q0FBUSxHQUFHVyxRQUFRLENBQUM7UUFDM0JrQixVQUFVN0IsdUNBQVEsR0FBR2MsUUFBUSxHQUFHQyxPQUFPLENBQUMsV0FBV0osUUFBUSxDQUFDO0lBQzlEO0lBQ0FLLFNBQVMsT0FBTyxFQUFFUCxLQUFLLEVBQUVvQixRQUFRLEVBQUU7UUFDakMsNENBQTRDO1FBQzVDM0IsK0NBQU1BLENBQUNlLEtBQUssQ0FBQyxDQUFDLFNBQVMsRUFBRVksU0FBUyxFQUFFLEVBQUVwQixPQUFPO1FBQzdDLE9BQU87WUFDTFMsU0FBUyxFQUFFO1lBQ1hZLFVBQVU7UUFDWjtJQUNGO0FBQ0YsR0FBRztBQUVILHdCQUF3QjtBQUNqQixNQUFNQyxzQkFBc0I5Qix3Q0FBSUEsQ0FBQztJQUN0Q0ssYUFBYTtJQUNiQyxZQUFZUCx1Q0FBUSxDQUFDO1FBQ25CZ0MsUUFBUWhDLHVDQUFRLEdBQUdXLFFBQVEsQ0FBQztRQUM1QnNCLE1BQU1qQyx3Q0FBTSxDQUFDO1lBQUM7WUFBVztZQUFXO1NBQVksRUFBRWMsUUFBUSxHQUFHQyxPQUFPLENBQUM7UUFDckVtQixHQUFHbEMsdUNBQVEsR0FBR2MsUUFBUSxHQUFHQyxPQUFPLENBQUMsR0FBR0osUUFBUSxDQUFDO0lBQy9DO0lBQ0FLLFNBQVMsT0FBTyxFQUFFZ0IsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLENBQUMsRUFBRTtRQUNqQyxxRUFBcUU7UUFDckVoQywrQ0FBTUEsQ0FBQ2UsS0FBSyxDQUFDLENBQUMsa0JBQWtCLEVBQUVlLFFBQVE7UUFDMUMsT0FBTztZQUNMRyxRQUFRO2dCQUNOO29CQUNFZCxLQUFLO29CQUNMVyxRQUFRQTtnQkFDVjthQUNEO1FBQ0g7SUFDRjtBQUNGLEdBQUc7QUFFSCxxQkFBcUI7QUFDZCxNQUFNSSxnQkFBZ0JuQyx3Q0FBSUEsQ0FBQztJQUNoQ0ssYUFBYTtJQUNiQyxZQUFZUCx1Q0FBUSxDQUFDO1FBQ25CcUMsTUFBTXJDLHVDQUFRLEdBQUdXLFFBQVEsQ0FBQztRQUMxQjJCLFdBQVd0Qyx1Q0FBUSxHQUFHYyxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxLQUFLSixRQUFRLENBQUM7UUFDdkQ0QixPQUFPdkMsd0NBQU0sQ0FBQztZQUFDO1lBQVU7WUFBYTtTQUFPLEVBQUVjLFFBQVEsR0FBR0MsT0FBTyxDQUFDO0lBQ3BFO0lBQ0FDLFNBQVMsT0FBTyxFQUFFcUIsSUFBSSxFQUFFQyxTQUFTLEVBQUVDLEtBQUssRUFBRTtRQUN4QywyQ0FBMkM7UUFDM0NyQywrQ0FBTUEsQ0FBQ2UsS0FBSyxDQUFDLENBQUMsb0JBQW9CLEVBQUVzQixNQUFNLE1BQU0sQ0FBQztRQUNqRCxPQUFPO1lBQ0xDLFNBQVM7WUFDVEMsZ0JBQWdCSixLQUFLSyxNQUFNO1lBQzNCQyxlQUFlO1FBQ2pCO0lBQ0Y7QUFDRixHQUFHO0FBRUgsa0JBQWtCO0FBQ1gsTUFBTUMsZ0JBQWdCM0Msd0NBQUlBLENBQUM7SUFDaENLLGFBQWE7SUFDYkMsWUFBWVAsdUNBQVEsQ0FBQztRQUNuQnFCLEtBQUtyQix1Q0FBUSxHQUFHcUIsR0FBRyxHQUFHVixRQUFRLENBQUM7UUFDL0JrQyxPQUFPN0Msc0NBQU8sQ0FBQ0EsdUNBQVEsSUFBSWMsUUFBUSxHQUFHSCxRQUFRLENBQUM7SUFDakQ7SUFDQUssU0FBUyxPQUFPLEVBQUVLLEdBQUcsRUFBRXdCLEtBQUssRUFBRTtRQUM1QiwyQ0FBMkM7UUFDM0MzQywrQ0FBTUEsQ0FBQ2UsS0FBSyxDQUFDLENBQUMsa0JBQWtCLEVBQUVJLEtBQUs7UUFDdkMsT0FBTztZQUNMZ0IsTUFBTTtZQUNOVSxXQUFXO1lBQ1hDLFVBQVUsQ0FBQztRQUNiO0lBQ0Y7QUFDRixHQUFHO0FBRUgsMEJBQTBCO0FBQ25CLE1BQU1DLG9CQUFvQmhELHdDQUFJQSxDQUFDO0lBQ3BDSyxhQUFhO0lBQ2JDLFlBQVlQLHVDQUFRLENBQUM7UUFDbkJrRCxNQUFNbEQsc0NBQU8sQ0FBQ0EsdUNBQVEsQ0FBQ0Esb0NBQUssS0FBS1csUUFBUSxDQUFDO1FBQzFDMEMsV0FBV3JELHdDQUFNLENBQUM7WUFBQztZQUFPO1lBQVE7WUFBTztZQUFXO1NBQVU7UUFDOURtQixPQUFPbkIsdUNBQVEsR0FBR2MsUUFBUSxHQUFHSCxRQUFRLENBQUM7UUFDdEMyQyxPQUFPdEQsdUNBQVEsR0FBR2MsUUFBUSxHQUFHSCxRQUFRLENBQUM7UUFDdEM0QyxPQUFPdkQsdUNBQVEsR0FBR2MsUUFBUSxHQUFHSCxRQUFRLENBQUM7SUFDeEM7SUFDQUssU0FBUyxPQUFPLEVBQUVrQyxJQUFJLEVBQUVHLFNBQVMsRUFBRWxDLEtBQUssRUFBRW1DLEtBQUssRUFBRUMsS0FBSyxFQUFFO1FBQ3RELGlFQUFpRTtRQUNqRXJELCtDQUFNQSxDQUFDZSxLQUFLLENBQUMsQ0FBQyxTQUFTLEVBQUVvQyxVQUFVLE1BQU0sQ0FBQztRQUMxQyxPQUFPO1lBQ0xHLFVBQVU7WUFDVkgsV0FBV0E7WUFDWEksWUFBWVAsS0FBS1IsTUFBTTtRQUN6QjtJQUNGO0FBQ0YsR0FBRztBQUVILHVCQUF1QjtBQUNoQixNQUFNZ0IscUJBQXFCekQsd0NBQUlBLENBQUM7SUFDckNLLGFBQWE7SUFDYkMsWUFBWVAsdUNBQVEsQ0FBQztRQUNuQnFDLE1BQU1yQyx1Q0FBUSxHQUFHVyxRQUFRLENBQUM7UUFDMUJnRCxPQUFPM0Qsd0NBQU0sQ0FBQztZQUFDO1lBQVE7WUFBVTtTQUFVLEVBQUVjLFFBQVEsR0FBR0MsT0FBTyxDQUFDO1FBQ2hFUSxVQUFVdkIsdUNBQVEsR0FBR2MsUUFBUSxHQUFHQyxPQUFPLENBQUM7SUFDMUM7SUFDQUMsU0FBUyxPQUFPLEVBQUVxQixJQUFJLEVBQUVzQixLQUFLLEVBQUVwQyxRQUFRLEVBQUU7UUFDdkMsMkRBQTJEO1FBQzNEckIsK0NBQU1BLENBQUNlLEtBQUssQ0FBQyxDQUFDLHNCQUFzQixFQUFFb0IsS0FBS3VCLFNBQVMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDO1FBQ2hFLE9BQU87WUFDTEMsVUFBVTtZQUNWQyxVQUFVO1lBQ1ZILE9BQU9BO1FBQ1Q7SUFDRjtBQUNGLEdBQUc7QUFFSCwyQkFBMkI7QUFDcEIsTUFBTUksbUJBQW1COUQsd0NBQUlBLENBQUM7SUFDbkNLLGFBQWE7SUFDYkMsWUFBWVAsdUNBQVEsQ0FBQztRQUNuQlMsT0FBT1QsdUNBQVEsR0FBR1csUUFBUSxDQUFDO1FBQzNCcUQsTUFBTWhFLHVDQUFRLEdBQUdjLFFBQVEsR0FBR0MsT0FBTyxDQUFDLEdBQUdKLFFBQVEsQ0FBQztJQUNsRDtJQUNBSyxTQUFTLE9BQU8sRUFBRVAsS0FBSyxFQUFFdUQsSUFBSSxFQUFFO1FBQzdCLElBQUk7WUFDRjlELCtDQUFNQSxDQUFDZSxLQUFLLENBQUMsQ0FBQywrQkFBK0IsRUFBRVIsT0FBTztZQUN0RCxNQUFNUyxVQUFVLE1BQU1mLG9FQUFjQSxDQUFDTSxPQUFPdUQ7WUFFNUMsT0FBTztnQkFDTDlDLFNBQVNBLFFBQVErQyxHQUFHLENBQUMsQ0FBQ0MsUUFBZ0I7d0JBQ3BDQyxPQUFPRCxNQUFNQyxLQUFLO3dCQUNsQjlCLE1BQU02QixNQUFNbEIsUUFBUSxFQUFFWCxRQUFRO3dCQUM5QlcsVUFBVWtCLE1BQU1sQixRQUFRO29CQUMxQjtnQkFDQW9CLE9BQU9sRCxRQUFRd0IsTUFBTTtZQUN2QjtRQUNGLEVBQUUsT0FBT2YsT0FBTztZQUNkekIsK0NBQU1BLENBQUN5QixLQUFLLENBQUMsd0JBQXdCQTtZQUNyQyxPQUFPO2dCQUNMVCxTQUFTLEVBQUU7Z0JBQ1hrRCxPQUFPO2dCQUNQekMsT0FBTztZQUNUO1FBQ0Y7SUFDRjtBQUNGLEdBQUc7QUFFSCw0QkFBNEI7QUFDckIsTUFBTTBDLG9CQUFvQnBFLHdDQUFJQSxDQUFDO0lBQ3BDSyxhQUFhO0lBQ2JDLFlBQVlQLHVDQUFRLENBQUM7UUFDbkJxQyxNQUFNckMsdUNBQVEsR0FBR1csUUFBUSxDQUFDO1FBQzFCcUMsVUFBVWhELHVDQUFRLENBQUNBLHVDQUFRLElBQUljLFFBQVEsR0FBR0gsUUFBUSxDQUFDO0lBQ3JEO0lBQ0FLLFNBQVMsT0FBTyxFQUFFcUIsSUFBSSxFQUFFVyxRQUFRLEVBQUU7UUFDaEMsSUFBSTtZQUNGLE1BQU1zQixLQUFLLENBQUMsSUFBSSxFQUFFQyxLQUFLQyxHQUFHLEdBQUcsQ0FBQyxFQUFFQyxLQUFLQyxNQUFNLEdBQUdDLFFBQVEsQ0FBQyxJQUFJQyxNQUFNLENBQUMsR0FBRyxJQUFJO1lBQ3pFLE1BQU14RSxtRUFBYUEsQ0FBQ2tFLElBQUlqQyxNQUFNVztZQUM5QjlDLCtDQUFNQSxDQUFDZSxLQUFLLENBQUMsQ0FBQyx5QkFBeUIsRUFBRXFELElBQUk7WUFFN0MsT0FBTztnQkFDTE8sU0FBUztnQkFDVFAsSUFBSUE7Z0JBQ0pRLFNBQVM7WUFDWDtRQUNGLEVBQUUsT0FBT25ELE9BQU87WUFDZHpCLCtDQUFNQSxDQUFDeUIsS0FBSyxDQUFDLHlCQUF5QkE7WUFDdEMsT0FBTztnQkFDTGtELFNBQVM7Z0JBQ1RsRCxPQUFPO1lBQ1Q7UUFDRjtJQUNGO0FBQ0YsR0FBRztBQUVILGdCQUFnQjtBQUNULE1BQU1vRCxlQUFlO0lBQzFCQyxXQUFXM0U7SUFDWDRFLGVBQWUzRDtJQUNmNEQsZUFBZXREO0lBQ2Z1RCxpQkFBaUJwRDtJQUNqQnFELFdBQVdoRDtJQUNYaUQsV0FBV3pDO0lBQ1gwQyxlQUFlckM7SUFDZnNDLGdCQUFnQjdCO0lBQ2hCOEIsY0FBY3pCO0lBQ2QzRCxlQUFlaUU7QUFDakIsRUFBRTtBQUVLLFNBQVNvQixjQUFjQyxJQUFZO0lBQ3hDLE9BQU9YLFlBQVksQ0FBQ1csS0FBa0M7QUFDeEQ7QUFFTyxTQUFTQztJQUNkLE9BQU9DLE9BQU9DLE1BQU0sQ0FBQ2Q7QUFDdkI7QUFFTyxTQUFTZSxpQkFBaUJDLE9BQWU7SUFDOUMsbURBQW1EO0lBQ25ELE1BQU1DLGVBQXlDO1FBQzdDQyxVQUFVO1lBQUM7WUFBYTtZQUFhO1lBQWE7WUFBZ0I7U0FBZ0I7UUFDbEZ4RSxNQUFNO1lBQUM7WUFBaUI7U0FBZTtRQUN2Q3lFLFVBQVU7WUFBQztZQUFtQjtZQUFrQjtTQUFlO1FBQy9EQyxVQUFVO1lBQUM7WUFBaUI7WUFBaUI7WUFBZ0I7U0FBZ0I7SUFDL0U7SUFFQSxNQUFNQyxZQUFZSixZQUFZLENBQUNELFFBQVEsSUFBSSxFQUFFO0lBQzdDLE9BQU9LLFVBQVVuQyxHQUFHLENBQUN5QixDQUFBQTtRQUNuQixNQUFNekYsT0FBT3dGLGNBQWNDO1FBQzNCLE9BQU96RixPQUFPO1lBQUV5RjtZQUFNekY7UUFBSyxJQUFJO0lBQ2pDLEdBQUdvRyxNQUFNLENBQUNDO0FBQ1oiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcSFBcXHZlcmNlbC1haS1hZ2VudHNcXGxpYlxcYWlcXHRvb2xzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgdG9vbCB9IGZyb20gJ2FpJztcbmltcG9ydCB7IGxvZ2dlciwgY2xpZW50TG9nZ2VyIH0gZnJvbSAnQC9saWIvbG9nZ2VyJztcbmltcG9ydCB7IHF1ZXJ5RG9jdW1lbnRzLCBzdG9yZURvY3VtZW50IH0gZnJvbSAnQC9saWIvdmVjdG9yL3BpbmVjb25lJztcbi8vIFdlYiBTZWFyY2ggVG9vbFxuZXhwb3J0IGNvbnN0IHdlYlNlYXJjaFRvb2wgPSB0b29sKHtcbiAgZGVzY3JpcHRpb246ICdTZWFyY2ggdGhlIHdlYiBmb3IgaW5mb3JtYXRpb24nLFxuICBwYXJhbWV0ZXJzOiB6Lm9iamVjdCh7XG4gICAgcXVlcnk6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBzZWFyY2ggcXVlcnknKSxcbiAgICBtYXhSZXN1bHRzOiB6Lm51bWJlcigpLm9wdGlvbmFsKCkuZGVmYXVsdCg1KS5kZXNjcmliZSgnTWF4aW11bSBudW1iZXIgb2YgcmVzdWx0cycpLFxuICB9KSxcbiAgZXhlY3V0ZTogYXN5bmMgKHsgcXVlcnksIG1heFJlc3VsdHMgfSkgPT4ge1xuICAgIC8vIEluIHByb2R1Y3Rpb24sIGludGVncmF0ZSB3aXRoIGEgcmVhbCBzZWFyY2ggQVBJIGxpa2UgU2VycGVyLCBCcmF2ZSBTZWFyY2gsIGV0Yy5cbiAgICBsb2dnZXIuZGVidWcoYFNlYXJjaGluZyBmb3I6ICR7cXVlcnl9YCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3VsdHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiAnRXhhbXBsZSBTZWFyY2ggUmVzdWx0JyxcbiAgICAgICAgICBzbmlwcGV0OiAnVGhpcyB3b3VsZCBiZSByZWFsIHNlYXJjaCByZXN1bHRzIGluIHByb2R1Y3Rpb24nLFxuICAgICAgICAgIHVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20nLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9O1xuICB9LFxufSk7XG5cbi8vIENvZGUgRXhlY3V0aW9uIFRvb2xcbmV4cG9ydCBjb25zdCBjb2RlRXhlY3V0aW9uVG9vbCA9IHRvb2woe1xuICBkZXNjcmlwdGlvbjogJ0V4ZWN1dGUgY29kZSBpbiBhIHNhbmRib3hlZCBlbnZpcm9ubWVudCcsXG4gIHBhcmFtZXRlcnM6IHoub2JqZWN0KHtcbiAgICBsYW5ndWFnZTogei5lbnVtKFsnamF2YXNjcmlwdCcsICdweXRob24nLCAndHlwZXNjcmlwdCddKS5kZXNjcmliZSgnUHJvZ3JhbW1pbmcgbGFuZ3VhZ2UnKSxcbiAgICBjb2RlOiB6LnN0cmluZygpLmRlc2NyaWJlKCdDb2RlIHRvIGV4ZWN1dGUnKSxcbiAgfSksXG4gIGV4ZWN1dGU6IGFzeW5jICh7IGxhbmd1YWdlLCBjb2RlIH0pID0+IHtcbiAgICAvLyBJbiBwcm9kdWN0aW9uLCB1c2UgYSBzYW5kYm94ZWQgZXhlY3V0aW9uIGVudmlyb25tZW50XG4gICAgbG9nZ2VyLmRlYnVnKGBFeGVjdXRpbmcgJHtsYW5ndWFnZX0gY29kZWApO1xuICAgIHJldHVybiB7XG4gICAgICBvdXRwdXQ6ICdDb2RlIGV4ZWN1dGlvbiByZXN1bHQgd291bGQgYXBwZWFyIGhlcmUnLFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgfTtcbiAgfSxcbn0pO1xuXG4vLyBEYXRhYmFzZSBRdWVyeSBUb29sXG5leHBvcnQgY29uc3QgZGF0YWJhc2VRdWVyeVRvb2wgPSB0b29sKHtcbiAgZGVzY3JpcHRpb246ICdRdWVyeSBhIGRhdGFiYXNlIGZvciBpbmZvcm1hdGlvbicsXG4gIHBhcmFtZXRlcnM6IHoub2JqZWN0KHtcbiAgICBxdWVyeTogei5zdHJpbmcoKS5kZXNjcmliZSgnU1FMIHF1ZXJ5IHRvIGV4ZWN1dGUnKSxcbiAgICBkYXRhYmFzZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLmRlZmF1bHQoJ2RlZmF1bHQnKS5kZXNjcmliZSgnRGF0YWJhc2UgbmFtZScpLFxuICB9KSxcbiAgZXhlY3V0ZTogYXN5bmMgKHsgcXVlcnksIGRhdGFiYXNlIH0pID0+IHtcbiAgICAvLyBJbiBwcm9kdWN0aW9uLCBjb25uZWN0IHRvIGFjdHVhbCBkYXRhYmFzZVxuICAgIGxvZ2dlci5kZWJ1ZyhgUXVlcnlpbmcgJHtkYXRhYmFzZX06ICR7cXVlcnl9YCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3VsdHM6IFtdLFxuICAgICAgcm93Q291bnQ6IDAsXG4gICAgfTtcbiAgfSxcbn0pO1xuXG4vLyBJbWFnZSBHZW5lcmF0aW9uIFRvb2xcbmV4cG9ydCBjb25zdCBpbWFnZUdlbmVyYXRpb25Ub29sID0gdG9vbCh7XG4gIGRlc2NyaXB0aW9uOiAnR2VuZXJhdGUgaW1hZ2VzIHVzaW5nIEFJJyxcbiAgcGFyYW1ldGVyczogei5vYmplY3Qoe1xuICAgIHByb21wdDogei5zdHJpbmcoKS5kZXNjcmliZSgnRGVzY3JpcHRpb24gb2YgdGhlIGltYWdlIHRvIGdlbmVyYXRlJyksXG4gICAgc2l6ZTogei5lbnVtKFsnMjU2eDI1NicsICc1MTJ4NTEyJywgJzEwMjR4MTAyNCddKS5vcHRpb25hbCgpLmRlZmF1bHQoJzUxMng1MTInKSxcbiAgICBuOiB6Lm51bWJlcigpLm9wdGlvbmFsKCkuZGVmYXVsdCgxKS5kZXNjcmliZSgnTnVtYmVyIG9mIGltYWdlcyB0byBnZW5lcmF0ZScpLFxuICB9KSxcbiAgZXhlY3V0ZTogYXN5bmMgKHsgcHJvbXB0LCBzaXplLCBuIH0pID0+IHtcbiAgICAvLyBJbiBwcm9kdWN0aW9uLCBpbnRlZ3JhdGUgd2l0aCBEQUxMLUUgb3Igb3RoZXIgaW1hZ2UgZ2VuZXJhdGlvbiBBUElcbiAgICBsb2dnZXIuZGVidWcoYEdlbmVyYXRpbmcgaW1hZ2U6ICR7cHJvbXB0fWApO1xuICAgIHJldHVybiB7XG4gICAgICBpbWFnZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vZ2VuZXJhdGVkLWltYWdlLnBuZycsXG4gICAgICAgICAgcHJvbXB0OiBwcm9tcHQsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH07XG4gIH0sXG59KTtcblxuLy8gU3VtbWFyaXphdGlvbiBUb29sXG5leHBvcnQgY29uc3Qgc3VtbWFyaXplVG9vbCA9IHRvb2woe1xuICBkZXNjcmlwdGlvbjogJ1N1bW1hcml6ZSBsb25nIHRleHQgY29udGVudCcsXG4gIHBhcmFtZXRlcnM6IHoub2JqZWN0KHtcbiAgICB0ZXh0OiB6LnN0cmluZygpLmRlc2NyaWJlKCdUZXh0IHRvIHN1bW1hcml6ZScpLFxuICAgIG1heExlbmd0aDogei5udW1iZXIoKS5vcHRpb25hbCgpLmRlZmF1bHQoNTAwKS5kZXNjcmliZSgnTWF4aW11bSBzdW1tYXJ5IGxlbmd0aCcpLFxuICAgIHN0eWxlOiB6LmVudW0oWydidWxsZXQnLCAncGFyYWdyYXBoJywgJ3RsZHInXSkub3B0aW9uYWwoKS5kZWZhdWx0KCdwYXJhZ3JhcGgnKSxcbiAgfSksXG4gIGV4ZWN1dGU6IGFzeW5jICh7IHRleHQsIG1heExlbmd0aCwgc3R5bGUgfSkgPT4ge1xuICAgIC8vIEluIHByb2R1Y3Rpb24sIHVzZSBhIHN1bW1hcml6YXRpb24gbW9kZWxcbiAgICBsb2dnZXIuZGVidWcoYFN1bW1hcml6aW5nIHRleHQgaW4gJHtzdHlsZX0gc3R5bGVgKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VtbWFyeTogJ1RoaXMgd291bGQgYmUgdGhlIHN1bW1hcml6ZWQgY29udGVudCcsXG4gICAgICBvcmlnaW5hbExlbmd0aDogdGV4dC5sZW5ndGgsXG4gICAgICBzdW1tYXJ5TGVuZ3RoOiAxMDAsXG4gICAgfTtcbiAgfSxcbn0pO1xuXG4vLyBQREYgUmVhZGVyIFRvb2xcbmV4cG9ydCBjb25zdCBwZGZSZWFkZXJUb29sID0gdG9vbCh7XG4gIGRlc2NyaXB0aW9uOiAnRXh0cmFjdCB0ZXh0IGZyb20gUERGIGRvY3VtZW50cycsXG4gIHBhcmFtZXRlcnM6IHoub2JqZWN0KHtcbiAgICB1cmw6IHouc3RyaW5nKCkudXJsKCkuZGVzY3JpYmUoJ1VSTCBvZiB0aGUgUERGIGRvY3VtZW50JyksXG4gICAgcGFnZXM6IHouYXJyYXkoei5udW1iZXIoKSkub3B0aW9uYWwoKS5kZXNjcmliZSgnU3BlY2lmaWMgcGFnZXMgdG8gZXh0cmFjdCcpLFxuICB9KSxcbiAgZXhlY3V0ZTogYXN5bmMgKHsgdXJsLCBwYWdlcyB9KSA9PiB7XG4gICAgLy8gSW4gcHJvZHVjdGlvbiwgdXNlIGEgUERGIHBhcnNpbmcgbGlicmFyeVxuICAgIGxvZ2dlci5kZWJ1ZyhgUmVhZGluZyBQREYgZnJvbTogJHt1cmx9YCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHQ6ICdFeHRyYWN0ZWQgUERGIGNvbnRlbnQgd291bGQgYXBwZWFyIGhlcmUnLFxuICAgICAgcGFnZUNvdW50OiAxMCxcbiAgICAgIG1ldGFkYXRhOiB7fSxcbiAgICB9O1xuICB9LFxufSk7XG5cbi8vIERhdGEgVmlzdWFsaXphdGlvbiBUb29sXG5leHBvcnQgY29uc3QgdmlzdWFsaXphdGlvblRvb2wgPSB0b29sKHtcbiAgZGVzY3JpcHRpb246ICdDcmVhdGUgZGF0YSB2aXN1YWxpemF0aW9ucycsXG4gIHBhcmFtZXRlcnM6IHoub2JqZWN0KHtcbiAgICBkYXRhOiB6LmFycmF5KHoucmVjb3JkKHouYW55KCkpKS5kZXNjcmliZSgnRGF0YSB0byB2aXN1YWxpemUnKSxcbiAgICBjaGFydFR5cGU6IHouZW51bShbJ2JhcicsICdsaW5lJywgJ3BpZScsICdzY2F0dGVyJywgJ2hlYXRtYXAnXSksXG4gICAgdGl0bGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5kZXNjcmliZSgnQ2hhcnQgdGl0bGUnKSxcbiAgICB4QXhpczogei5zdHJpbmcoKS5vcHRpb25hbCgpLmRlc2NyaWJlKCdYLWF4aXMgbGFiZWwnKSxcbiAgICB5QXhpczogei5zdHJpbmcoKS5vcHRpb25hbCgpLmRlc2NyaWJlKCdZLWF4aXMgbGFiZWwnKSxcbiAgfSksXG4gIGV4ZWN1dGU6IGFzeW5jICh7IGRhdGEsIGNoYXJ0VHlwZSwgdGl0bGUsIHhBeGlzLCB5QXhpcyB9KSA9PiB7XG4gICAgLy8gSW4gcHJvZHVjdGlvbiwgZ2VuZXJhdGUgYWN0dWFsIGNoYXJ0IHVzaW5nIENoYXJ0LmpzIG9yIHNpbWlsYXJcbiAgICBsb2dnZXIuZGVidWcoYENyZWF0aW5nICR7Y2hhcnRUeXBlfSBjaGFydGApO1xuICAgIHJldHVybiB7XG4gICAgICBjaGFydFVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vY2hhcnQucG5nJyxcbiAgICAgIGNoYXJ0VHlwZTogY2hhcnRUeXBlLFxuICAgICAgZGF0YVBvaW50czogZGF0YS5sZW5ndGgsXG4gICAgfTtcbiAgfSxcbn0pO1xuXG4vLyBWb2ljZSBTeW50aGVzaXMgVG9vbFxuZXhwb3J0IGNvbnN0IHZvaWNlU3ludGhlc2lzVG9vbCA9IHRvb2woe1xuICBkZXNjcmlwdGlvbjogJ0NvbnZlcnQgdGV4dCB0byBzcGVlY2gnLFxuICBwYXJhbWV0ZXJzOiB6Lm9iamVjdCh7XG4gICAgdGV4dDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGV4dCB0byBjb252ZXJ0IHRvIHNwZWVjaCcpLFxuICAgIHZvaWNlOiB6LmVudW0oWydtYWxlJywgJ2ZlbWFsZScsICduZXV0cmFsJ10pLm9wdGlvbmFsKCkuZGVmYXVsdCgnbmV1dHJhbCcpLFxuICAgIGxhbmd1YWdlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkuZGVmYXVsdCgnZW4tVVMnKSxcbiAgfSksXG4gIGV4ZWN1dGU6IGFzeW5jICh7IHRleHQsIHZvaWNlLCBsYW5ndWFnZSB9KSA9PiB7XG4gICAgLy8gSW4gcHJvZHVjdGlvbiwgdXNlIFRUUyBBUEkgbGlrZSBFbGV2ZW5MYWJzIG9yIEdvb2dsZSBUVFNcbiAgICBsb2dnZXIuZGVidWcoYENvbnZlcnRpbmcgdG8gc3BlZWNoOiAke3RleHQuc3Vic3RyaW5nKDAsIDUwKX0uLi5gKTtcbiAgICByZXR1cm4ge1xuICAgICAgYXVkaW9Vcmw6ICdodHRwczovL2V4YW1wbGUuY29tL2F1ZGlvLm1wMycsXG4gICAgICBkdXJhdGlvbjogMTAsXG4gICAgICB2b2ljZTogdm9pY2UsXG4gICAgfTtcbiAgfSxcbn0pO1xuXG4vLyBWZWN0b3IgU2VhcmNoIFRvb2wgKFJBRylcbmV4cG9ydCBjb25zdCB2ZWN0b3JTZWFyY2hUb29sID0gdG9vbCh7XG4gIGRlc2NyaXB0aW9uOiAnU2VhcmNoIGZvciBzaW1pbGFyIGRvY3VtZW50cyBpbiB0aGUga25vd2xlZGdlIGJhc2UgdXNpbmcgdmVjdG9yIGVtYmVkZGluZ3MnLFxuICBwYXJhbWV0ZXJzOiB6Lm9iamVjdCh7XG4gICAgcXVlcnk6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBzZWFyY2ggcXVlcnkgdG8gZmluZCBzaW1pbGFyIGRvY3VtZW50cycpLFxuICAgIHRvcEs6IHoubnVtYmVyKCkub3B0aW9uYWwoKS5kZWZhdWx0KDUpLmRlc2NyaWJlKCdOdW1iZXIgb2Ygc2ltaWxhciBkb2N1bWVudHMgdG8gcmV0cmlldmUnKSxcbiAgfSksXG4gIGV4ZWN1dGU6IGFzeW5jICh7IHF1ZXJ5LCB0b3BLIH0pID0+IHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmRlYnVnKGBTZWFyY2hpbmcgdmVjdG9yIGRhdGFiYXNlIGZvcjogJHtxdWVyeX1gKTtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBxdWVyeURvY3VtZW50cyhxdWVyeSwgdG9wSyk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3VsdHM6IHJlc3VsdHMubWFwKChtYXRjaDogYW55KSA9PiAoe1xuICAgICAgICAgIHNjb3JlOiBtYXRjaC5zY29yZSxcbiAgICAgICAgICB0ZXh0OiBtYXRjaC5tZXRhZGF0YT8udGV4dCB8fCAnJyxcbiAgICAgICAgICBtZXRhZGF0YTogbWF0Y2gubWV0YWRhdGEsXG4gICAgICAgIH0pKSxcbiAgICAgICAgY291bnQ6IHJlc3VsdHMubGVuZ3RoLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdWZWN0b3Igc2VhcmNoIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3VsdHM6IFtdLFxuICAgICAgICBjb3VudDogMCxcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gc2VhcmNoIHZlY3RvciBkYXRhYmFzZScsXG4gICAgICB9O1xuICAgIH1cbiAgfSxcbn0pO1xuXG4vLyBTdG9yZSBEb2N1bWVudCBUb29sIChSQUcpXG5leHBvcnQgY29uc3Qgc3RvcmVEb2N1bWVudFRvb2wgPSB0b29sKHtcbiAgZGVzY3JpcHRpb246ICdTdG9yZSBhIGRvY3VtZW50IGluIHRoZSBrbm93bGVkZ2UgYmFzZSBmb3IgbGF0ZXIgcmV0cmlldmFsJyxcbiAgcGFyYW1ldGVyczogei5vYmplY3Qoe1xuICAgIHRleHQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSB0ZXh0IGNvbnRlbnQgdG8gc3RvcmUnKSxcbiAgICBtZXRhZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSkub3B0aW9uYWwoKS5kZXNjcmliZSgnQWRkaXRpb25hbCBtZXRhZGF0YSB0byBzdG9yZSB3aXRoIHRoZSBkb2N1bWVudCcpLFxuICB9KSxcbiAgZXhlY3V0ZTogYXN5bmMgKHsgdGV4dCwgbWV0YWRhdGEgfSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpZCA9IGBkb2NfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICAgICAgYXdhaXQgc3RvcmVEb2N1bWVudChpZCwgdGV4dCwgbWV0YWRhdGEpO1xuICAgICAgbG9nZ2VyLmRlYnVnKGBTdG9yZWQgZG9jdW1lbnQgd2l0aCBpZDogJHtpZH1gKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgaWQ6IGlkLFxuICAgICAgICBtZXNzYWdlOiAnRG9jdW1lbnQgc3RvcmVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1N0b3JlIGRvY3VtZW50IGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBzdG9yZSBkb2N1bWVudCcsXG4gICAgICB9O1xuICAgIH1cbiAgfSxcbn0pO1xuXG4vLyBUb29sIFJlZ2lzdHJ5XG5leHBvcnQgY29uc3QgdG9vbFJlZ2lzdHJ5ID0ge1xuICB3ZWJTZWFyY2g6IHdlYlNlYXJjaFRvb2wsXG4gIGNvZGVFeGVjdXRpb246IGNvZGVFeGVjdXRpb25Ub29sLFxuICBkYXRhYmFzZVF1ZXJ5OiBkYXRhYmFzZVF1ZXJ5VG9vbCxcbiAgaW1hZ2VHZW5lcmF0aW9uOiBpbWFnZUdlbmVyYXRpb25Ub29sLFxuICBzdW1tYXJpemU6IHN1bW1hcml6ZVRvb2wsXG4gIHBkZlJlYWRlcjogcGRmUmVhZGVyVG9vbCxcbiAgdmlzdWFsaXphdGlvbjogdmlzdWFsaXphdGlvblRvb2wsXG4gIHZvaWNlU3ludGhlc2lzOiB2b2ljZVN5bnRoZXNpc1Rvb2wsXG4gIHZlY3RvclNlYXJjaDogdmVjdG9yU2VhcmNoVG9vbCxcbiAgc3RvcmVEb2N1bWVudDogc3RvcmVEb2N1bWVudFRvb2wsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9vbEJ5TmFtZShuYW1lOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHRvb2xSZWdpc3RyeVtuYW1lIGFzIGtleW9mIHR5cGVvZiB0b29sUmVnaXN0cnldO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxsVG9vbHMoKSB7XG4gIHJldHVybiBPYmplY3QudmFsdWVzKHRvb2xSZWdpc3RyeSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb29sc0ZvckFnZW50KGFnZW50SWQ6IHN0cmluZyk6IGFueVtdIHtcbiAgLy8gVGhpcyB3b3VsZCBtYXAgYWdlbnQgSURzIHRvIHRoZWlyIHNwZWNpZmljIHRvb2xzXG4gIGNvbnN0IGFnZW50VG9vbE1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge1xuICAgIHJlc2VhcmNoOiBbJ3dlYlNlYXJjaCcsICdwZGZSZWFkZXInLCAnc3VtbWFyaXplJywgJ3ZlY3RvclNlYXJjaCcsICdzdG9yZURvY3VtZW50J10sXG4gICAgY29kZTogWydjb2RlRXhlY3V0aW9uJywgJ3ZlY3RvclNlYXJjaCddLFxuICAgIGNyZWF0aXZlOiBbJ2ltYWdlR2VuZXJhdGlvbicsICd2b2ljZVN5bnRoZXNpcycsICd2ZWN0b3JTZWFyY2gnXSxcbiAgICBhbmFseXNpczogWydkYXRhYmFzZVF1ZXJ5JywgJ3Zpc3VhbGl6YXRpb24nLCAndmVjdG9yU2VhcmNoJywgJ3N0b3JlRG9jdW1lbnQnXSxcbiAgfTtcblxuICBjb25zdCB0b29sTmFtZXMgPSBhZ2VudFRvb2xNYXBbYWdlbnRJZF0gfHwgW107XG4gIHJldHVybiB0b29sTmFtZXMubWFwKG5hbWUgPT4ge1xuICAgIGNvbnN0IHRvb2wgPSBnZXRUb29sQnlOYW1lKG5hbWUpO1xuICAgIHJldHVybiB0b29sID8geyBuYW1lLCB0b29sIH0gOiBudWxsO1xuICB9KS5maWx0ZXIoQm9vbGVhbikgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHRvb2w6IGFueSB9Pjtcbn0iXSwibmFtZXMiOlsieiIsInRvb2wiLCJsb2dnZXIiLCJxdWVyeURvY3VtZW50cyIsInN0b3JlRG9jdW1lbnQiLCJ3ZWJTZWFyY2hUb29sIiwiZGVzY3JpcHRpb24iLCJwYXJhbWV0ZXJzIiwib2JqZWN0IiwicXVlcnkiLCJzdHJpbmciLCJkZXNjcmliZSIsIm1heFJlc3VsdHMiLCJudW1iZXIiLCJvcHRpb25hbCIsImRlZmF1bHQiLCJleGVjdXRlIiwiZGVidWciLCJyZXN1bHRzIiwidGl0bGUiLCJzbmlwcGV0IiwidXJsIiwiY29kZUV4ZWN1dGlvblRvb2wiLCJsYW5ndWFnZSIsImVudW0iLCJjb2RlIiwib3V0cHV0IiwiZXJyb3IiLCJkYXRhYmFzZVF1ZXJ5VG9vbCIsImRhdGFiYXNlIiwicm93Q291bnQiLCJpbWFnZUdlbmVyYXRpb25Ub29sIiwicHJvbXB0Iiwic2l6ZSIsIm4iLCJpbWFnZXMiLCJzdW1tYXJpemVUb29sIiwidGV4dCIsIm1heExlbmd0aCIsInN0eWxlIiwic3VtbWFyeSIsIm9yaWdpbmFsTGVuZ3RoIiwibGVuZ3RoIiwic3VtbWFyeUxlbmd0aCIsInBkZlJlYWRlclRvb2wiLCJwYWdlcyIsImFycmF5IiwicGFnZUNvdW50IiwibWV0YWRhdGEiLCJ2aXN1YWxpemF0aW9uVG9vbCIsImRhdGEiLCJyZWNvcmQiLCJhbnkiLCJjaGFydFR5cGUiLCJ4QXhpcyIsInlBeGlzIiwiY2hhcnRVcmwiLCJkYXRhUG9pbnRzIiwidm9pY2VTeW50aGVzaXNUb29sIiwidm9pY2UiLCJzdWJzdHJpbmciLCJhdWRpb1VybCIsImR1cmF0aW9uIiwidmVjdG9yU2VhcmNoVG9vbCIsInRvcEsiLCJtYXAiLCJtYXRjaCIsInNjb3JlIiwiY291bnQiLCJzdG9yZURvY3VtZW50VG9vbCIsImlkIiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwidG9vbFJlZ2lzdHJ5Iiwid2ViU2VhcmNoIiwiY29kZUV4ZWN1dGlvbiIsImRhdGFiYXNlUXVlcnkiLCJpbWFnZUdlbmVyYXRpb24iLCJzdW1tYXJpemUiLCJwZGZSZWFkZXIiLCJ2aXN1YWxpemF0aW9uIiwidm9pY2VTeW50aGVzaXMiLCJ2ZWN0b3JTZWFyY2giLCJnZXRUb29sQnlOYW1lIiwibmFtZSIsImdldEFsbFRvb2xzIiwiT2JqZWN0IiwidmFsdWVzIiwiZ2V0VG9vbHNGb3JBZ2VudCIsImFnZW50SWQiLCJhZ2VudFRvb2xNYXAiLCJyZXNlYXJjaCIsImNyZWF0aXZlIiwiYW5hbHlzaXMiLCJ0b29sTmFtZXMiLCJmaWx0ZXIiLCJCb29sZWFuIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/ai/tools.ts\n");

/***/ }),

/***/ "(rsc)/./lib/logger.ts":
/*!***********************!*\
  !*** ./lib/logger.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientLogger: () => (/* binding */ clientLogger),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n// Production-ready logging utility for vercel-ai-agents\n// Environment-aware structured logging without external dependencies\nclass Logger {\n    shouldLog(level) {\n        const levels = {\n            debug: 0,\n            info: 1,\n            warn: 2,\n            error: 3\n        };\n        return levels[level] >= levels[this.logLevel];\n    }\n    formatLog(entry) {\n        if (!this.shouldLog(entry.level)) return;\n        if (this.isDevelopment) {\n            // Development: Use console with colors and formatting\n            const colors = {\n                debug: '\\x1b[36m',\n                info: '\\x1b[32m',\n                warn: '\\x1b[33m',\n                error: '\\x1b[31m'\n            };\n            const reset = '\\x1b[0m';\n            console[entry.level === 'debug' ? 'log' : entry.level](`${colors[entry.level]}[${entry.level.toUpperCase()}]${reset} ${entry.timestamp} - ${entry.message}`, entry.data || '');\n            if (entry.error) {\n                console.error(entry.error);\n            }\n        } else {\n            // Production: Structured JSON logging\n            const logData = {\n                level: entry.level,\n                message: entry.message,\n                timestamp: entry.timestamp,\n                service: 'vercel-ai-agents',\n                ...entry.data && {\n                    data: entry.data\n                },\n                ...entry.error && {\n                    error: {\n                        message: entry.error.message,\n                        stack: entry.error.stack\n                    }\n                }\n            };\n            console.log(JSON.stringify(logData));\n        }\n    }\n    debug(message, data) {\n        this.formatLog({\n            level: 'debug',\n            message,\n            timestamp: new Date().toISOString(),\n            data\n        });\n    }\n    info(message, data) {\n        this.formatLog({\n            level: 'info',\n            message,\n            timestamp: new Date().toISOString(),\n            data\n        });\n    }\n    warn(message, data) {\n        this.formatLog({\n            level: 'warn',\n            message,\n            timestamp: new Date().toISOString(),\n            data\n        });\n    }\n    error(message, error, data) {\n        this.formatLog({\n            level: 'error',\n            message,\n            timestamp: new Date().toISOString(),\n            error: error instanceof Error ? error : new Error(String(error)),\n            data\n        });\n    }\n    constructor(){\n        this.isDevelopment = \"development\" === 'development';\n        this.logLevel = process.env.LOG_LEVEL || 'info';\n    }\n}\nconst logger = new Logger();\n// Client-side logging utility for browser environments\nconst clientLogger = {\n    debug: (message, data)=>{\n        if (true) {\n            console.debug(`[DEBUG] ${message}`, data || '');\n        }\n    },\n    info: (message, data)=>{\n        if (true) {\n            console.info(`[INFO] ${message}`, data || '');\n        }\n    },\n    warn: (message, data)=>{\n        console.warn(`[WARN] ${message}`, data || '');\n    },\n    error: (message, error, data)=>{\n        console.error(`[ERROR] ${message}`, error, data || '');\n        // In production, could send to error tracking service\n        if (false) {}\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBUztBQUVuQyx1REFBdUQ7QUFDaEQsTUFBTWlDLGVBQWU7SUFDMUI3QixPQUFPLENBQUNhLFNBQWlCQztRQUN2QixJQUFJVyxJQUFzQyxFQUFFO1lBQzFDZixRQUFRVixLQUFLLENBQUMsQ0FBQyxRQUFRLEVBQUVhLFNBQVMsRUFBRUMsUUFBUTtRQUM5QztJQUNGO0lBRUFiLE1BQU0sQ0FBQ1ksU0FBaUJDO1FBQ3RCLElBQUlXLElBQXNDLEVBQUU7WUFDMUNmLFFBQVFULElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRVksU0FBUyxFQUFFQyxRQUFRO1FBQzVDO0lBQ0Y7SUFFQVosTUFBTSxDQUFDVyxTQUFpQkM7UUFDdEJKLFFBQVFSLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRVcsU0FBUyxFQUFFQyxRQUFRO0lBQzVDO0lBRUFYLE9BQU8sQ0FBQ1UsU0FBaUJWLE9BQXFCVztRQUM1Q0osUUFBUVAsS0FBSyxDQUFDLENBQUMsUUFBUSxFQUFFVSxTQUFTLEVBQUVWLE9BQU9XLFFBQVE7UUFFbkQsc0RBQXNEO1FBQ3RELElBQUksS0FBc0UsRUFBRSxFQU8zRTtJQUNIO0FBQ0YsRUFBRTtBQUVGLGlFQUFlYyxNQUFNQSxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEhQXFx2ZXJjZWwtYWktYWdlbnRzXFxsaWJcXGxvZ2dlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBQcm9kdWN0aW9uLXJlYWR5IGxvZ2dpbmcgdXRpbGl0eSBmb3IgdmVyY2VsLWFpLWFnZW50c1xyXG4vLyBFbnZpcm9ubWVudC1hd2FyZSBzdHJ1Y3R1cmVkIGxvZ2dpbmcgd2l0aG91dCBleHRlcm5hbCBkZXBlbmRlbmNpZXNcclxuXHJcbnR5cGUgTG9nTGV2ZWwgPSAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJztcclxuXHJcbmludGVyZmFjZSBMb2dFbnRyeSB7XHJcbiAgbGV2ZWw6IExvZ0xldmVsO1xyXG4gIG1lc3NhZ2U6IHN0cmluZztcclxuICB0aW1lc3RhbXA6IHN0cmluZztcclxuICBkYXRhPzogYW55O1xyXG4gIGVycm9yPzogRXJyb3I7XHJcbn1cclxuXHJcbmNsYXNzIExvZ2dlciB7XHJcbiAgcHJpdmF0ZSBpc0RldmVsb3BtZW50ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCc7XHJcbiAgcHJpdmF0ZSBsb2dMZXZlbDogTG9nTGV2ZWwgPSAocHJvY2Vzcy5lbnYuTE9HX0xFVkVMIGFzIExvZ0xldmVsKSB8fCAnaW5mbyc7XHJcblxyXG4gIHByaXZhdGUgc2hvdWxkTG9nKGxldmVsOiBMb2dMZXZlbCk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgbGV2ZWxzOiBSZWNvcmQ8TG9nTGV2ZWwsIG51bWJlcj4gPSB7XHJcbiAgICAgIGRlYnVnOiAwLFxyXG4gICAgICBpbmZvOiAxLFxyXG4gICAgICB3YXJuOiAyLFxyXG4gICAgICBlcnJvcjogMyxcclxuICAgIH07XHJcbiAgICByZXR1cm4gbGV2ZWxzW2xldmVsXSA+PSBsZXZlbHNbdGhpcy5sb2dMZXZlbF07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGZvcm1hdExvZyhlbnRyeTogTG9nRW50cnkpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5zaG91bGRMb2coZW50cnkubGV2ZWwpKSByZXR1cm47XHJcblxyXG4gICAgaWYgKHRoaXMuaXNEZXZlbG9wbWVudCkge1xyXG4gICAgICAvLyBEZXZlbG9wbWVudDogVXNlIGNvbnNvbGUgd2l0aCBjb2xvcnMgYW5kIGZvcm1hdHRpbmdcclxuICAgICAgY29uc3QgY29sb3JzID0ge1xyXG4gICAgICAgIGRlYnVnOiAnXFx4MWJbMzZtJywgLy8gY3lhblxyXG4gICAgICAgIGluZm86ICdcXHgxYlszMm0nLCAgLy8gZ3JlZW5cclxuICAgICAgICB3YXJuOiAnXFx4MWJbMzNtJywgIC8vIHllbGxvd1xyXG4gICAgICAgIGVycm9yOiAnXFx4MWJbMzFtJywgLy8gcmVkXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IHJlc2V0ID0gJ1xceDFiWzBtJztcclxuXHJcbiAgICAgIGNvbnNvbGVbZW50cnkubGV2ZWwgPT09ICdkZWJ1ZycgPyAnbG9nJyA6IGVudHJ5LmxldmVsXShcclxuICAgICAgICBgJHtjb2xvcnNbZW50cnkubGV2ZWxdfVske2VudHJ5LmxldmVsLnRvVXBwZXJDYXNlKCl9XSR7cmVzZXR9ICR7ZW50cnkudGltZXN0YW1wfSAtICR7ZW50cnkubWVzc2FnZX1gLFxyXG4gICAgICAgIGVudHJ5LmRhdGEgfHwgJydcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChlbnRyeS5lcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZW50cnkuZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBQcm9kdWN0aW9uOiBTdHJ1Y3R1cmVkIEpTT04gbG9nZ2luZ1xyXG4gICAgICBjb25zdCBsb2dEYXRhID0ge1xyXG4gICAgICAgIGxldmVsOiBlbnRyeS5sZXZlbCxcclxuICAgICAgICBtZXNzYWdlOiBlbnRyeS5tZXNzYWdlLFxyXG4gICAgICAgIHRpbWVzdGFtcDogZW50cnkudGltZXN0YW1wLFxyXG4gICAgICAgIHNlcnZpY2U6ICd2ZXJjZWwtYWktYWdlbnRzJyxcclxuICAgICAgICAuLi4oZW50cnkuZGF0YSAmJiB7IGRhdGE6IGVudHJ5LmRhdGEgfSksXHJcbiAgICAgICAgLi4uKGVudHJ5LmVycm9yICYmIHtcclxuICAgICAgICAgIGVycm9yOiB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVudHJ5LmVycm9yLm1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHN0YWNrOiBlbnRyeS5lcnJvci5zdGFjayxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGxvZ0RhdGEpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRlYnVnKG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5mb3JtYXRMb2coe1xyXG4gICAgICBsZXZlbDogJ2RlYnVnJyxcclxuICAgICAgbWVzc2FnZSxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIGRhdGEsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGluZm8obWVzc2FnZTogc3RyaW5nLCBkYXRhPzogYW55KTogdm9pZCB7XHJcbiAgICB0aGlzLmZvcm1hdExvZyh7XHJcbiAgICAgIGxldmVsOiAnaW5mbycsXHJcbiAgICAgIG1lc3NhZ2UsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICBkYXRhLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB3YXJuKG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5mb3JtYXRMb2coe1xyXG4gICAgICBsZXZlbDogJ3dhcm4nLFxyXG4gICAgICBtZXNzYWdlLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgZGF0YSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IEVycm9yIHwgYW55LCBkYXRhPzogYW55KTogdm9pZCB7XHJcbiAgICB0aGlzLmZvcm1hdExvZyh7XHJcbiAgICAgIGxldmVsOiAnZXJyb3InLFxyXG4gICAgICBtZXNzYWdlLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKSxcclxuICAgICAgZGF0YSxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoKTtcclxuXHJcbi8vIENsaWVudC1zaWRlIGxvZ2dpbmcgdXRpbGl0eSBmb3IgYnJvd3NlciBlbnZpcm9ubWVudHNcclxuZXhwb3J0IGNvbnN0IGNsaWVudExvZ2dlciA9IHtcclxuICBkZWJ1ZzogKG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSkgPT4ge1xyXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XHJcbiAgICAgIGNvbnNvbGUuZGVidWcoYFtERUJVR10gJHttZXNzYWdlfWAsIGRhdGEgfHwgJycpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIGluZm86IChtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBhbnkpID0+IHtcclxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICBjb25zb2xlLmluZm8oYFtJTkZPXSAke21lc3NhZ2V9YCwgZGF0YSB8fCAnJyk7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgd2FybjogKG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSkgPT4ge1xyXG4gICAgY29uc29sZS53YXJuKGBbV0FSTl0gJHttZXNzYWdlfWAsIGRhdGEgfHwgJycpO1xyXG4gIH0sXHJcblxyXG4gIGVycm9yOiAobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IEVycm9yIHwgYW55LCBkYXRhPzogYW55KSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBbRVJST1JdICR7bWVzc2FnZX1gLCBlcnJvciwgZGF0YSB8fCAnJyk7XHJcblxyXG4gICAgLy8gSW4gcHJvZHVjdGlvbiwgY291bGQgc2VuZCB0byBlcnJvciB0cmFja2luZyBzZXJ2aWNlXHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAvLyBFeGFtcGxlOiBTZW5kIHRvIFNlbnRyeSwgTG9nUm9ja2V0LCBldGMuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gU2VudHJ5LmNhcHR1cmVFeGNlcHRpb24oZXJyb3IpO1xyXG4gICAgICB9IGNhdGNoIChsb2dnaW5nRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2cgZXJyb3IgdG8gZXh0ZXJuYWwgc2VydmljZTonLCBsb2dnaW5nRXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyOyJdLCJuYW1lcyI6WyJMb2dnZXIiLCJzaG91bGRMb2ciLCJsZXZlbCIsImxldmVscyIsImRlYnVnIiwiaW5mbyIsIndhcm4iLCJlcnJvciIsImxvZ0xldmVsIiwiZm9ybWF0TG9nIiwiZW50cnkiLCJpc0RldmVsb3BtZW50IiwiY29sb3JzIiwicmVzZXQiLCJjb25zb2xlIiwidG9VcHBlckNhc2UiLCJ0aW1lc3RhbXAiLCJtZXNzYWdlIiwiZGF0YSIsImxvZ0RhdGEiLCJzZXJ2aWNlIiwic3RhY2siLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiRXJyb3IiLCJTdHJpbmciLCJwcm9jZXNzIiwiZW52IiwiTE9HX0xFVkVMIiwibG9nZ2VyIiwiY2xpZW50TG9nZ2VyIiwibG9nZ2luZ0Vycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/logger.ts\n");

/***/ }),

/***/ "(rsc)/./lib/vector/pinecone.ts":
/*!********************************!*\
  !*** ./lib/vector/pinecone.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEmbedding: () => (/* binding */ createEmbedding),\n/* harmony export */   deleteByFilter: () => (/* binding */ deleteByFilter),\n/* harmony export */   deleteVector: () => (/* binding */ deleteVector),\n/* harmony export */   deleteVectors: () => (/* binding */ deleteVectors),\n/* harmony export */   getIndexStats: () => (/* binding */ getIndexStats),\n/* harmony export */   getOpenAIClient: () => (/* binding */ getOpenAIClient),\n/* harmony export */   getPineconeClient: () => (/* binding */ getPineconeClient),\n/* harmony export */   getPineconeIndex: () => (/* binding */ getPineconeIndex),\n/* harmony export */   queryDocuments: () => (/* binding */ queryDocuments),\n/* harmony export */   queryVectors: () => (/* binding */ queryVectors),\n/* harmony export */   storeDocument: () => (/* binding */ storeDocument),\n/* harmony export */   storeVector: () => (/* binding */ storeVector)\n/* harmony export */ });\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @pinecone-database/pinecone */ \"(rsc)/./node_modules/@pinecone-database/pinecone/dist/index.js\");\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../logger */ \"(rsc)/./lib/logger.ts\");\n\n\n\n// Initialize Pinecone client\nlet pineconeClient = null;\nlet openaiClient = null;\n/**\r\n * Get or create Pinecone client instance\r\n */ function getPineconeClient() {\n    if (!pineconeClient) {\n        const apiKey = \"pcsk_7ASVTB_6CVLDs5XFC225Wb9v5suwPSrVPWgsLm2Xxu3TMdsecPxcqndnWmb67vrYUwY7D2\";\n        if (!apiKey) {\n            throw new Error('PINECONE_API_KEY is not set in environment variables');\n        }\n        pineconeClient = new _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_0__.Pinecone({\n            apiKey: apiKey\n        });\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.info('Pinecone client initialized');\n    }\n    return pineconeClient;\n}\n/**\r\n * Get or create OpenAI client for embeddings\r\n */ function getOpenAIClient() {\n    if (!openaiClient) {\n        const apiKey = \"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\";\n        if (!apiKey) {\n            throw new Error('OPENAI_API_KEY is not set in environment variables');\n        }\n        openaiClient = new openai__WEBPACK_IMPORTED_MODULE_2__.OpenAI({\n            apiKey\n        });\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.info('OpenAI client initialized for embeddings');\n    }\n    return openaiClient;\n}\n/**\r\n * Get the Pinecone index\r\n */ async function getPineconeIndex(indexName) {\n    const client = getPineconeClient();\n    const index = indexName || process.env.PINECONE_INDEX || 'vercel-ai-agents';\n    try {\n        const indexRef = client.index(index);\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Connected to Pinecone index: ${index}`);\n        return indexRef;\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Error connecting to Pinecone index:', error);\n        throw error;\n    }\n}\n/**\r\n * Create embeddings using OpenAI\r\n */ async function createEmbedding(text) {\n    const openai = getOpenAIClient();\n    try {\n        const response = await openai.embeddings.create({\n            model: 'text-embedding-3-small',\n            input: text,\n            dimensions: 1024\n        });\n        return response.data[0].embedding;\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Error creating embedding:', error);\n        throw error;\n    }\n}\n/**\r\n * Store a vector in Pinecone\r\n */ async function storeVector(id, embedding, metadata) {\n    try {\n        const index = await getPineconeIndex();\n        await index.upsert([\n            {\n                id,\n                values: embedding,\n                metadata: metadata || {}\n            }\n        ]);\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.debug(`Stored vector with id: ${id}`);\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Error storing vector:', error);\n        throw error;\n    }\n}\n/**\r\n * Store a text document in Pinecone by creating embedding first\r\n */ async function storeDocument(id, text, metadata) {\n    try {\n        const embedding = await createEmbedding(text);\n        await storeVector(id, embedding, {\n            text,\n            ...metadata\n        });\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.debug(`Stored document with id: ${id}`);\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Error storing document:', error);\n        throw error;\n    }\n}\n/**\r\n * Query similar vectors from Pinecone\r\n */ async function queryVectors(queryEmbedding, topK = 5, filter) {\n    try {\n        const index = await getPineconeIndex();\n        const queryResponse = await index.query({\n            vector: queryEmbedding,\n            topK,\n            includeMetadata: true,\n            ...filter && {\n                filter\n            }\n        });\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.debug(`Found ${queryResponse.matches?.length || 0} similar vectors`);\n        return queryResponse.matches || [];\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Error querying vectors:', error);\n        throw error;\n    }\n}\n/**\r\n * Query similar documents by text\r\n */ async function queryDocuments(text, topK = 5, filter) {\n    try {\n        const queryEmbedding = await createEmbedding(text);\n        return await queryVectors(queryEmbedding, topK, filter);\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Error querying documents:', error);\n        throw error;\n    }\n}\n/**\r\n * Delete a vector by ID\r\n */ async function deleteVector(id) {\n    try {\n        const index = await getPineconeIndex();\n        await index.deleteOne(id);\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.debug(`Deleted vector with id: ${id}`);\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Error deleting vector:', error);\n        throw error;\n    }\n}\n/**\r\n * Delete multiple vectors by IDs\r\n */ async function deleteVectors(ids) {\n    try {\n        const index = await getPineconeIndex();\n        await index.deleteMany(ids);\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.debug(`Deleted ${ids.length} vectors`);\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Error deleting vectors:', error);\n        throw error;\n    }\n}\n/**\r\n * Delete all vectors by metadata filter\r\n */ async function deleteByFilter(filter) {\n    try {\n        const index = await getPineconeIndex();\n        await index.deleteMany(filter);\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.debug('Deleted vectors by filter');\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Error deleting vectors by filter:', error);\n        throw error;\n    }\n}\n/**\r\n * Get index stats\r\n */ async function getIndexStats() {\n    try {\n        const index = await getPineconeIndex();\n        const stats = await index.describeIndexStats();\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.debug('Retrieved index stats');\n        return stats;\n    } catch (error) {\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Error getting index stats:', error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0YsTUFBTXBDLFFBQVEsTUFBTUg7UUFDcEIsTUFBTUcsTUFBTXFDLFVBQVUsQ0FBQ0Q7UUFDdkJuRCwyQ0FBTUEsQ0FBQ21DLEtBQUssQ0FBQyxDQUFDLFFBQVEsRUFBRWdCLElBQUlMLE1BQU0sQ0FBQyxRQUFRLENBQUM7SUFDOUMsRUFBRSxPQUFPNUIsT0FBTztRQUNkbEIsMkNBQU1BLENBQUNrQixLQUFLLENBQUMsMkJBQTJCQTtRQUN4QyxNQUFNQTtJQUNSO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLGVBQWVtQyxlQUFlYixNQUEyQjtJQUM5RCxJQUFJO1FBQ0YsTUFBTXpCLFFBQVEsTUFBTUg7UUFDcEIsTUFBTUcsTUFBTXFDLFVBQVUsQ0FBQ1o7UUFDdkJ4QywyQ0FBTUEsQ0FBQ21DLEtBQUssQ0FBQztJQUNmLEVBQUUsT0FBT2pCLE9BQU87UUFDZGxCLDJDQUFNQSxDQUFDa0IsS0FBSyxDQUFDLHFDQUFxQ0E7UUFDbEQsTUFBTUE7SUFDUjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxlQUFlb0M7SUFDcEIsSUFBSTtRQUNGLE1BQU12QyxRQUFRLE1BQU1IO1FBQ3BCLE1BQU0yQyxRQUFRLE1BQU14QyxNQUFNeUMsa0JBQWtCO1FBQzVDeEQsMkNBQU1BLENBQUNtQyxLQUFLLENBQUM7UUFDYixPQUFPb0I7SUFDVCxFQUFFLE9BQU9yQyxPQUFPO1FBQ2RsQiwyQ0FBTUEsQ0FBQ2tCLEtBQUssQ0FBQyw4QkFBOEJBO1FBQzNDLE1BQU1BO0lBQ1I7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxIUFxcdmVyY2VsLWFpLWFnZW50c1xcbGliXFx2ZWN0b3JcXHBpbmVjb25lLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBpbmVjb25lIH0gZnJvbSAnQHBpbmVjb25lLWRhdGFiYXNlL3BpbmVjb25lJztcclxuaW1wb3J0IHsgT3BlbkFJIH0gZnJvbSAnb3BlbmFpJztcclxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcclxuXHJcbi8vIEluaXRpYWxpemUgUGluZWNvbmUgY2xpZW50XHJcbmxldCBwaW5lY29uZUNsaWVudDogUGluZWNvbmUgfCBudWxsID0gbnVsbDtcclxubGV0IG9wZW5haUNsaWVudDogT3BlbkFJIHwgbnVsbCA9IG51bGw7XHJcblxyXG4vKipcclxuICogR2V0IG9yIGNyZWF0ZSBQaW5lY29uZSBjbGllbnQgaW5zdGFuY2VcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRQaW5lY29uZUNsaWVudCgpOiBQaW5lY29uZSB7XHJcbiAgaWYgKCFwaW5lY29uZUNsaWVudCkge1xyXG4gICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuUElORUNPTkVfQVBJX0tFWTtcclxuICAgIGlmICghYXBpS2V5KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignUElORUNPTkVfQVBJX0tFWSBpcyBub3Qgc2V0IGluIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xyXG4gICAgfVxyXG5cclxuICAgIHBpbmVjb25lQ2xpZW50ID0gbmV3IFBpbmVjb25lKHtcclxuICAgICAgYXBpS2V5OiBhcGlLZXksXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgbG9nZ2VyLmluZm8oJ1BpbmVjb25lIGNsaWVudCBpbml0aWFsaXplZCcpO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4gcGluZWNvbmVDbGllbnQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgb3IgY3JlYXRlIE9wZW5BSSBjbGllbnQgZm9yIGVtYmVkZGluZ3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRPcGVuQUlDbGllbnQoKTogT3BlbkFJIHtcclxuICBpZiAoIW9wZW5haUNsaWVudCkge1xyXG4gICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVk7XHJcbiAgICBpZiAoIWFwaUtleSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ09QRU5BSV9BUElfS0VZIGlzIG5vdCBzZXQgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbmFpQ2xpZW50ID0gbmV3IE9wZW5BSSh7IGFwaUtleSB9KTtcclxuICAgIGxvZ2dlci5pbmZvKCdPcGVuQUkgY2xpZW50IGluaXRpYWxpemVkIGZvciBlbWJlZGRpbmdzJyk7XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiBvcGVuYWlDbGllbnQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIFBpbmVjb25lIGluZGV4XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGluZWNvbmVJbmRleChpbmRleE5hbWU/OiBzdHJpbmcpIHtcclxuICBjb25zdCBjbGllbnQgPSBnZXRQaW5lY29uZUNsaWVudCgpO1xyXG4gIGNvbnN0IGluZGV4ID0gaW5kZXhOYW1lIHx8IHByb2Nlc3MuZW52LlBJTkVDT05FX0lOREVYIHx8ICd2ZXJjZWwtYWktYWdlbnRzJztcclxuICBcclxuICB0cnkge1xyXG4gICAgY29uc3QgaW5kZXhSZWYgPSBjbGllbnQuaW5kZXgoaW5kZXgpO1xyXG4gICAgbG9nZ2VyLmluZm8oYENvbm5lY3RlZCB0byBQaW5lY29uZSBpbmRleDogJHtpbmRleH1gKTtcclxuICAgIHJldHVybiBpbmRleFJlZjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBjb25uZWN0aW5nIHRvIFBpbmVjb25lIGluZGV4OicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBlbWJlZGRpbmdzIHVzaW5nIE9wZW5BSVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUVtYmVkZGluZyh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcltdPiB7XHJcbiAgY29uc3Qgb3BlbmFpID0gZ2V0T3BlbkFJQ2xpZW50KCk7XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmVtYmVkZGluZ3MuY3JlYXRlKHtcclxuICAgICAgbW9kZWw6ICd0ZXh0LWVtYmVkZGluZy0zLXNtYWxsJyxcclxuICAgICAgaW5wdXQ6IHRleHQsXHJcbiAgICAgIGRpbWVuc2lvbnM6IDEwMjQsIC8vIE1hdGNoIFBpbmVjb25lIGluZGV4IGRpbWVuc2lvblxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHJldHVybiByZXNwb25zZS5kYXRhWzBdLmVtYmVkZGluZztcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBjcmVhdGluZyBlbWJlZGRpbmc6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogU3RvcmUgYSB2ZWN0b3IgaW4gUGluZWNvbmVcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdG9yZVZlY3RvcihcclxuICBpZDogc3RyaW5nLFxyXG4gIGVtYmVkZGluZzogbnVtYmVyW10sXHJcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBpbmRleCA9IGF3YWl0IGdldFBpbmVjb25lSW5kZXgoKTtcclxuICAgIFxyXG4gICAgYXdhaXQgaW5kZXgudXBzZXJ0KFtcclxuICAgICAge1xyXG4gICAgICAgIGlkLFxyXG4gICAgICAgIHZhbHVlczogZW1iZWRkaW5nLFxyXG4gICAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YSB8fCB7fSxcclxuICAgICAgfSxcclxuICAgIF0pO1xyXG4gICAgXHJcbiAgICBsb2dnZXIuZGVidWcoYFN0b3JlZCB2ZWN0b3Igd2l0aCBpZDogJHtpZH1gKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzdG9yaW5nIHZlY3RvcjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdG9yZSBhIHRleHQgZG9jdW1lbnQgaW4gUGluZWNvbmUgYnkgY3JlYXRpbmcgZW1iZWRkaW5nIGZpcnN0XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RvcmVEb2N1bWVudChcclxuICBpZDogc3RyaW5nLFxyXG4gIHRleHQ6IHN0cmluZyxcclxuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cclxuKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGVtYmVkZGluZyA9IGF3YWl0IGNyZWF0ZUVtYmVkZGluZyh0ZXh0KTtcclxuICAgIGF3YWl0IHN0b3JlVmVjdG9yKGlkLCBlbWJlZGRpbmcsIHsgdGV4dCwgLi4ubWV0YWRhdGEgfSk7XHJcbiAgICBsb2dnZXIuZGVidWcoYFN0b3JlZCBkb2N1bWVudCB3aXRoIGlkOiAke2lkfWApO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHN0b3JpbmcgZG9jdW1lbnQ6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUXVlcnkgc2ltaWxhciB2ZWN0b3JzIGZyb20gUGluZWNvbmVcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeVZlY3RvcnMoXHJcbiAgcXVlcnlFbWJlZGRpbmc6IG51bWJlcltdLFxyXG4gIHRvcEs6IG51bWJlciA9IDUsXHJcbiAgZmlsdGVyPzogUmVjb3JkPHN0cmluZywgYW55PlxyXG4pOiBQcm9taXNlPGFueVtdPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGluZGV4ID0gYXdhaXQgZ2V0UGluZWNvbmVJbmRleCgpO1xyXG4gICAgXHJcbiAgICBjb25zdCBxdWVyeVJlc3BvbnNlID0gYXdhaXQgaW5kZXgucXVlcnkoe1xyXG4gICAgICB2ZWN0b3I6IHF1ZXJ5RW1iZWRkaW5nLFxyXG4gICAgICB0b3BLLFxyXG4gICAgICBpbmNsdWRlTWV0YWRhdGE6IHRydWUsXHJcbiAgICAgIC4uLihmaWx0ZXIgJiYgeyBmaWx0ZXIgfSksXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgbG9nZ2VyLmRlYnVnKGBGb3VuZCAke3F1ZXJ5UmVzcG9uc2UubWF0Y2hlcz8ubGVuZ3RoIHx8IDB9IHNpbWlsYXIgdmVjdG9yc2ApO1xyXG4gICAgcmV0dXJuIHF1ZXJ5UmVzcG9uc2UubWF0Y2hlcyB8fCBbXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBxdWVyeWluZyB2ZWN0b3JzOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFF1ZXJ5IHNpbWlsYXIgZG9jdW1lbnRzIGJ5IHRleHRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeURvY3VtZW50cyhcclxuICB0ZXh0OiBzdHJpbmcsXHJcbiAgdG9wSzogbnVtYmVyID0gNSxcclxuICBmaWx0ZXI/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XHJcbik6IFByb21pc2U8YW55W10+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcXVlcnlFbWJlZGRpbmcgPSBhd2FpdCBjcmVhdGVFbWJlZGRpbmcodGV4dCk7XHJcbiAgICByZXR1cm4gYXdhaXQgcXVlcnlWZWN0b3JzKHF1ZXJ5RW1iZWRkaW5nLCB0b3BLLCBmaWx0ZXIpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHF1ZXJ5aW5nIGRvY3VtZW50czonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZWxldGUgYSB2ZWN0b3IgYnkgSURcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVWZWN0b3IoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBpbmRleCA9IGF3YWl0IGdldFBpbmVjb25lSW5kZXgoKTtcclxuICAgIGF3YWl0IGluZGV4LmRlbGV0ZU9uZShpZCk7XHJcbiAgICBsb2dnZXIuZGVidWcoYERlbGV0ZWQgdmVjdG9yIHdpdGggaWQ6ICR7aWR9YCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZGVsZXRpbmcgdmVjdG9yOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIERlbGV0ZSBtdWx0aXBsZSB2ZWN0b3JzIGJ5IElEc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVZlY3RvcnMoaWRzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBpbmRleCA9IGF3YWl0IGdldFBpbmVjb25lSW5kZXgoKTtcclxuICAgIGF3YWl0IGluZGV4LmRlbGV0ZU1hbnkoaWRzKTtcclxuICAgIGxvZ2dlci5kZWJ1ZyhgRGVsZXRlZCAke2lkcy5sZW5ndGh9IHZlY3RvcnNgKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBkZWxldGluZyB2ZWN0b3JzOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIERlbGV0ZSBhbGwgdmVjdG9ycyBieSBtZXRhZGF0YSBmaWx0ZXJcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVCeUZpbHRlcihmaWx0ZXI6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgaW5kZXggPSBhd2FpdCBnZXRQaW5lY29uZUluZGV4KCk7XHJcbiAgICBhd2FpdCBpbmRleC5kZWxldGVNYW55KGZpbHRlcik7XHJcbiAgICBsb2dnZXIuZGVidWcoJ0RlbGV0ZWQgdmVjdG9ycyBieSBmaWx0ZXInKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBkZWxldGluZyB2ZWN0b3JzIGJ5IGZpbHRlcjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgaW5kZXggc3RhdHNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJbmRleFN0YXRzKCk6IFByb21pc2U8YW55PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGluZGV4ID0gYXdhaXQgZ2V0UGluZWNvbmVJbmRleCgpO1xyXG4gICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBpbmRleC5kZXNjcmliZUluZGV4U3RhdHMoKTtcclxuICAgIGxvZ2dlci5kZWJ1ZygnUmV0cmlldmVkIGluZGV4IHN0YXRzJyk7XHJcbiAgICByZXR1cm4gc3RhdHM7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZ2V0dGluZyBpbmRleCBzdGF0czonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJQaW5lY29uZSIsIk9wZW5BSSIsImxvZ2dlciIsInBpbmVjb25lQ2xpZW50Iiwib3BlbmFpQ2xpZW50IiwiZ2V0UGluZWNvbmVDbGllbnQiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiUElORUNPTkVfQVBJX0tFWSIsIkVycm9yIiwiaW5mbyIsImdldE9wZW5BSUNsaWVudCIsIk9QRU5BSV9BUElfS0VZIiwiZ2V0UGluZWNvbmVJbmRleCIsImluZGV4TmFtZSIsImNsaWVudCIsImluZGV4IiwiUElORUNPTkVfSU5ERVgiLCJpbmRleFJlZiIsImVycm9yIiwiY3JlYXRlRW1iZWRkaW5nIiwidGV4dCIsIm9wZW5haSIsInJlc3BvbnNlIiwiZW1iZWRkaW5ncyIsImNyZWF0ZSIsIm1vZGVsIiwiaW5wdXQiLCJkaW1lbnNpb25zIiwiZGF0YSIsImVtYmVkZGluZyIsInN0b3JlVmVjdG9yIiwiaWQiLCJtZXRhZGF0YSIsInVwc2VydCIsInZhbHVlcyIsImRlYnVnIiwic3RvcmVEb2N1bWVudCIsInF1ZXJ5VmVjdG9ycyIsInF1ZXJ5RW1iZWRkaW5nIiwidG9wSyIsImZpbHRlciIsInF1ZXJ5UmVzcG9uc2UiLCJxdWVyeSIsInZlY3RvciIsImluY2x1ZGVNZXRhZGF0YSIsIm1hdGNoZXMiLCJsZW5ndGgiLCJxdWVyeURvY3VtZW50cyIsImRlbGV0ZVZlY3RvciIsImRlbGV0ZU9uZSIsImRlbGV0ZVZlY3RvcnMiLCJpZHMiLCJkZWxldGVNYW55IiwiZGVsZXRlQnlGaWx0ZXIiLCJnZXRJbmRleFN0YXRzIiwic3RhdHMiLCJkZXNjcmliZUluZGV4U3RhdHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/vector/pinecone.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5Cvercel-ai-agents%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5Cvercel-ai-agents&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5Cvercel-ai-agents%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5Cvercel-ai-agents&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var C_Users_HP_vercel_ai_agents_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./app/api/chat/route.ts */ \"(rsc)/./app/api/chat/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"C:\\\\Users\\\\HP\\\\vercel-ai-agents\\\\app\\\\api\\\\chat\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_HP_vercel_ai_agents_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/chat/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNIUCU1Q3ZlcmNlbC1haS1hZ2VudHMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0hQJTVDdmVyY2VsLWFpLWFnZW50cyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCZpc0dsb2JhbE5vdEZvdW5kRW5hYmxlZD0hIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2Q7QUFDUztBQUNPO0FBQ0s7QUFDbUM7QUFDakQ7QUFDTztBQUNmO0FBQ3NDO0FBQ3pCO0FBQ007QUFDQztBQUNoQjtBQUNvQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLE9BQW9DLElBQUksQ0FBRTtBQUN2RCx3QkFBd0IsTUFBdUM7QUFDL0Q7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FB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QTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTiw2QkFBNkIsNkZBQWU7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMkZBQW1CO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZFQUFZO0FBQzFCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCB7IGdldFJlcXVlc3RNZXRhIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVxdWVzdC1tZXRhXCI7XG5pbXBvcnQgeyBnZXRUcmFjZXIsIFNwYW5LaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL3RyYWNlclwiO1xuaW1wb3J0IHsgbm9ybWFsaXplQXBwUGF0aCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvYXBwLXBhdGhzXCI7XG5pbXBvcnQgeyBOb2RlTmV4dFJlcXVlc3QsIE5vZGVOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9iYXNlLWh0dHAvbm9kZVwiO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3RBZGFwdGVyLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3NwZWMtZXh0ZW5zaW9uL2FkYXB0ZXJzL25leHQtcmVxdWVzdFwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBnZXRSZXZhbGlkYXRlUmVhc29uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvaW5zdHJ1bWVudGF0aW9uL3V0aWxzXCI7XG5pbXBvcnQgeyBzZW5kUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9zZW5kLXJlc3BvbnNlXCI7XG5pbXBvcnQgeyBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMsIHRvTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvdXRpbHNcIjtcbmltcG9ydCB7IGdldENhY2hlQ29udHJvbEhlYWRlciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9jYWNoZS1jb250cm9sXCI7XG5pbXBvcnQgeyBJTkZJTklURV9DQUNIRSwgTkVYVF9DQUNIRV9UQUdTX0hFQURFUiB9IGZyb20gXCJuZXh0L2Rpc3QvbGliL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgTm9GYWxsYmFja0Vycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL25vLWZhbGxiYWNrLWVycm9yLmV4dGVybmFsXCI7XG5pbXBvcnQgeyBDYWNoZWRSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXNwb25zZS1jYWNoZVwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXEhQXFxcXHZlcmNlbC1haS1hZ2VudHNcXFxcYXBwXFxcXGFwaVxcXFxjaGF0XFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jaGF0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2hhdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2hhdC9yb3V0ZVwiXG4gICAgfSxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcmVsYXRpdmVQcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJycsXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxIUFxcXFx2ZXJjZWwtYWktYWdlbnRzXFxcXGFwcFxcXFxhcGlcXFxcY2hhdFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICB2YXIgX25leHRDb25maWdfZXhwZXJpbWVudGFsO1xuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL2NoYXQvcm91dGVcIjtcbiAgICAvLyB0dXJib3BhY2sgZG9lc24ndCBub3JtYWxpemUgYC9pbmRleGAgaW4gdGhlIHBhZ2UgbmFtZVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gdG8gcHJvY2VzcyBkeW5hbWljIHJvdXRlcyBwcm9wZXJseVxuICAgIC8vIFRPRE86IGZpeCB0dXJib3BhY2sgcHJvdmlkaW5nIGRpZmZlcmluZyB2YWx1ZSBmcm9tIHdlYnBhY2tcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFVSQk9QQUNLKSB7XG4gICAgICAgIHNyY1BhZ2UgPSBzcmNQYWdlLnJlcGxhY2UoL1xcL2luZGV4JC8sICcnKSB8fCAnLyc7XG4gICAgfSBlbHNlIGlmIChzcmNQYWdlID09PSAnL2luZGV4Jykge1xuICAgICAgICAvLyB3ZSBhbHdheXMgbm9ybWFsaXplIC9pbmRleCBzcGVjaWZpY2FsbHlcbiAgICAgICAgc3JjUGFnZSA9ICcvJztcbiAgICB9XG4gICAgY29uc3QgbXVsdGlab25lRHJhZnRNb2RlID0gcHJvY2Vzcy5lbnYuX19ORVhUX01VTFRJX1pPTkVfRFJBRlRfTU9ERTtcbiAgICBjb25zdCBwcmVwYXJlUmVzdWx0ID0gYXdhaXQgcm91dGVNb2R1bGUucHJlcGFyZShyZXEsIHJlcywge1xuICAgICAgICBzcmNQYWdlLFxuICAgICAgICBtdWx0aVpvbmVEcmFmdE1vZGVcbiAgICB9KTtcbiAgICBpZiAoIXByZXBhcmVSZXN1bHQpIHtcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDA7XG4gICAgICAgIHJlcy5lbmQoJ0JhZCBSZXF1ZXN0Jyk7XG4gICAgICAgIGN0eC53YWl0VW50aWwgPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC53YWl0VW50aWwuY2FsbChjdHgsIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHsgYnVpbGRJZCwgcGFyYW1zLCBuZXh0Q29uZmlnLCBpc0RyYWZ0TW9kZSwgcHJlcmVuZGVyTWFuaWZlc3QsIHJvdXRlclNlcnZlckNvbnRleHQsIGlzT25EZW1hbmRSZXZhbGlkYXRlLCByZXZhbGlkYXRlT25seUdlbmVyYXRlZCwgcmVzb2x2ZWRQYXRobmFtZSB9ID0gcHJlcGFyZVJlc3VsdDtcbiAgICBjb25zdCBub3JtYWxpemVkU3JjUGFnZSA9IG5vcm1hbGl6ZUFwcFBhdGgoc3JjUGFnZSk7XG4gICAgbGV0IGlzSXNyID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXSB8fCBwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgIGlmIChpc0lzciAmJiAhaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgY29uc3QgaXNQcmVyZW5kZXJlZCA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICAgICAgY29uc3QgcHJlcmVuZGVySW5mbyA9IHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdO1xuICAgICAgICBpZiAocHJlcmVuZGVySW5mbykge1xuICAgICAgICAgICAgaWYgKHByZXJlbmRlckluZm8uZmFsbGJhY2sgPT09IGZhbHNlICYmICFpc1ByZXJlbmRlcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vRmFsbGJhY2tFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBjYWNoZUtleSA9IG51bGw7XG4gICAgaWYgKGlzSXNyICYmICFyb3V0ZU1vZHVsZS5pc0RldiAmJiAhaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgY2FjaGVLZXkgPSByZXNvbHZlZFBhdGhuYW1lO1xuICAgICAgICAvLyBlbnN1cmUgL2luZGV4IGFuZCAvIGlzIG5vcm1hbGl6ZWQgdG8gb25lIGtleVxuICAgICAgICBjYWNoZUtleSA9IGNhY2hlS2V5ID09PSAnL2luZGV4JyA/ICcvJyA6IGNhY2hlS2V5O1xuICAgIH1cbiAgICBjb25zdCBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSA9IC8vIElmIHdlJ3JlIGluIGRldmVsb3BtZW50LCB3ZSBhbHdheXMgc3VwcG9ydCBkeW5hbWljIEhUTUxcbiAgICByb3V0ZU1vZHVsZS5pc0RldiA9PT0gdHJ1ZSB8fCAvLyBJZiB0aGlzIGlzIG5vdCBTU0cgb3IgZG9lcyBub3QgaGF2ZSBzdGF0aWMgcGF0aHMsIHRoZW4gaXQgc3VwcG9ydHNcbiAgICAvLyBkeW5hbWljIEhUTUwuXG4gICAgIWlzSXNyO1xuICAgIC8vIFRoaXMgaXMgYSByZXZhbGlkYXRpb24gcmVxdWVzdCBpZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWNcbiAgICAvLyBwYWdlIGFuZCBpdCBpcyBub3QgYmVpbmcgcmVzdW1lZCBmcm9tIGEgcG9zdHBvbmVkIHJlbmRlciBhbmRcbiAgICAvLyBpdCBpcyBub3QgYSBkeW5hbWljIFJTQyByZXF1ZXN0IHRoZW4gaXQgaXMgYSByZXZhbGlkYXRpb25cbiAgICAvLyByZXF1ZXN0LlxuICAgIGNvbnN0IGlzUmV2YWxpZGF0ZSA9IGlzSXNyICYmICFzdXBwb3J0c0R5bmFtaWNSZXNwb25zZTtcbiAgICBjb25zdCBtZXRob2QgPSByZXEubWV0aG9kIHx8ICdHRVQnO1xuICAgIGNvbnN0IHRyYWNlciA9IGdldFRyYWNlcigpO1xuICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSB0cmFjZXIuZ2V0QWN0aXZlU2NvcGVTcGFuKCk7XG4gICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgICAgcGFyYW1zLFxuICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgcmVuZGVyT3B0czoge1xuICAgICAgICAgICAgZXhwZXJpbWVudGFsOiB7XG4gICAgICAgICAgICAgICAgY2FjaGVDb21wb25lbnRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmNhY2hlQ29tcG9uZW50cyksXG4gICAgICAgICAgICAgICAgYXV0aEludGVycnVwdHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuYXV0aEludGVycnVwdHMpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UsXG4gICAgICAgICAgICBpbmNyZW1lbnRhbENhY2hlOiBnZXRSZXF1ZXN0TWV0YShyZXEsICdpbmNyZW1lbnRhbENhY2hlJyksXG4gICAgICAgICAgICBjYWNoZUxpZmVQcm9maWxlczogKF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbCA9IG5leHRDb25maWcuZXhwZXJpbWVudGFsKSA9PSBudWxsID8gdm9pZCAwIDogX25leHRDb25maWdfZXhwZXJpbWVudGFsLmNhY2hlTGlmZSxcbiAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgIHdhaXRVbnRpbDogY3R4LndhaXRVbnRpbCxcbiAgICAgICAgICAgIG9uQ2xvc2U6IChjYik9PntcbiAgICAgICAgICAgICAgICByZXMub24oJ2Nsb3NlJywgY2IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQWZ0ZXJUYXNrRXJyb3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG9uSW5zdHJ1bWVudGF0aW9uUmVxdWVzdEVycm9yOiAoZXJyb3IsIF9yZXF1ZXN0LCBlcnJvckNvbnRleHQpPT5yb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVycm9yLCBlcnJvckNvbnRleHQsIHJvdXRlclNlcnZlckNvbnRleHQpXG4gICAgICAgIH0sXG4gICAgICAgIHNoYXJlZENvbnRleHQ6IHtcbiAgICAgICAgICAgIGJ1aWxkSWRcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgbm9kZU5leHRSZXEgPSBuZXcgTm9kZU5leHRSZXF1ZXN0KHJlcSk7XG4gICAgY29uc3Qgbm9kZU5leHRSZXMgPSBuZXcgTm9kZU5leHRSZXNwb25zZShyZXMpO1xuICAgIGNvbnN0IG5leHRSZXEgPSBOZXh0UmVxdWVzdEFkYXB0ZXIuZnJvbU5vZGVOZXh0UmVxdWVzdChub2RlTmV4dFJlcSwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZShyZXMpKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBpbnZva2VSb3V0ZU1vZHVsZSA9IGFzeW5jIChzcGFuKT0+e1xuICAgICAgICAgICAgcmV0dXJuIHJvdXRlTW9kdWxlLmhhbmRsZShuZXh0UmVxLCBjb250ZXh0KS5maW5hbGx5KCgpPT57XG4gICAgICAgICAgICAgICAgaWYgKCFzcGFuKSByZXR1cm47XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHAuc3RhdHVzX2NvZGUnOiByZXMuc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgJ25leHQucnNjJzogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByb290U3BhbkF0dHJpYnV0ZXMgPSB0cmFjZXIuZ2V0Um9vdFNwYW5BdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICAgICAgLy8gV2Ugd2VyZSB1bmFibGUgdG8gZ2V0IGF0dHJpYnV0ZXMsIHByb2JhYmx5IE9URUwgaXMgbm90IGVuYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAoIXJvb3RTcGFuQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpICE9PSBCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5leHBlY3RlZCByb290IHNwYW4gdHlwZSAnJHtyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpfScuIFBsZWFzZSByZXBvcnQgdGhpcyBOZXh0LmpzIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS92ZXJjZWwvbmV4dC5qc2ApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gcm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5yb3V0ZScpO1xuICAgICAgICAgICAgICAgIGlmIChyb3V0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7bWV0aG9kfSAke3JvdXRlfWA7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnNwYW5fbmFtZSc6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUoYCR7bWV0aG9kfSAke3JlcS51cmx9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGhhbmRsZVJlc3BvbnNlID0gYXN5bmMgKGN1cnJlbnRTcGFuKT0+e1xuICAgICAgICAgICAgdmFyIF9jYWNoZUVudHJ5X3ZhbHVlO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VHZW5lcmF0b3IgPSBhc3luYyAoeyBwcmV2aW91c0NhY2hlRW50cnkgfSk9PntcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNPbkRlbWFuZFJldmFsaWRhdGUgJiYgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQgJiYgIXByZXZpb3VzQ2FjaGVFbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbi1kZW1hbmQgcmV2YWxpZGF0ZSBhbHdheXMgc2V0cyB0aGlzIGhlYWRlclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcigneC1uZXh0anMtY2FjaGUnLCAnUkVWQUxJREFURUQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5lbmQoJ1RoaXMgcGFnZSBjb3VsZCBub3QgYmUgZm91bmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaW52b2tlUm91dGVNb2R1bGUoY3VycmVudFNwYW4pO1xuICAgICAgICAgICAgICAgICAgICByZXEuZmV0Y2hNZXRyaWNzID0gY29udGV4dC5yZW5kZXJPcHRzLmZldGNoTWV0cmljcztcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBlbmRpbmdXYWl0VW50aWwgPSBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbDtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXR0ZW1wdCB1c2luZyBwcm92aWRlZCB3YWl0VW50aWwgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0J3Mgbm90IHdlIGZhbGxiYWNrIHRvIHNlbmRSZXNwb25zZSdzIGhhbmRsaW5nXG4gICAgICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nV2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LndhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC53YWl0VW50aWwocGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1dhaXRVbnRpbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZVRhZ3MgPSBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkVGFncztcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljIHJlc3BvbnNlLCB3ZSBjYW4gY2FjaGUgaXQgc28gbG9uZ1xuICAgICAgICAgICAgICAgICAgICAvLyBhcyBpdCdzIG5vdCBlZGdlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJc3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3B5IHRoZSBoZWFkZXJzIGZyb20gdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IHRvTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMocmVzcG9uc2UuaGVhZGVycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVUYWdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1tORVhUX0NBQ0hFX1RBR1NfSEVBREVSXSA9IGNhY2hlVGFncztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGVhZGVyc1snY29udGVudC10eXBlJ10gJiYgYmxvYi50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1snY29udGVudC10eXBlJ10gPSBibG9iLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXZhbGlkYXRlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA+PSBJTkZJTklURV9DQUNIRSA/IGZhbHNlIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleHBpcmUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZSA+PSBJTkZJTklURV9DQUNIRSA/IHVuZGVmaW5lZCA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGNhY2hlIGVudHJ5IGZvciB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBCdWZmZXIuZnJvbShhd2FpdCBibG9iLmFycmF5QnVmZmVyKCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZUVudHJ5O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VuZCByZXNwb25zZSB3aXRob3V0IGNhY2hpbmcgaWYgbm90IElTUlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgcmVzcG9uc2UsIGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSBiYWNrZ3JvdW5kIHJldmFsaWRhdGUgd2UgbmVlZCB0byByZXBvcnRcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlcXVlc3QgZXJyb3IgaGVyZSBhcyBpdCB3b24ndCBiZSBidWJibGVkXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZpb3VzQ2FjaGVFbnRyeS5pc1N0YWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IHNyY1BhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVUeXBlOiAncm91dGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGVSZWFzb246IGdldFJldmFsaWRhdGVSZWFzb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJvdXRlclNlcnZlckNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IGF3YWl0IHJvdXRlTW9kdWxlLmhhbmRsZVJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgbmV4dENvbmZpZyxcbiAgICAgICAgICAgICAgICBjYWNoZUtleSxcbiAgICAgICAgICAgICAgICByb3V0ZUtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgICAgICAgICAgaXNGYWxsYmFjazogZmFsc2UsXG4gICAgICAgICAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgICAgICAgICAgaXNSb3V0ZVBQUkVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlR2VuZXJhdG9yLFxuICAgICAgICAgICAgICAgIHdhaXRVbnRpbDogY3R4LndhaXRVbnRpbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBjcmVhdGUgYSBjYWNoZUVudHJ5IGZvciBJU1JcbiAgICAgICAgICAgIGlmICghaXNJc3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoY2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogKF9jYWNoZUVudHJ5X3ZhbHVlID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlLmtpbmQpICE9PSBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9jYWNoZUVudHJ5X3ZhbHVlMTtcbiAgICAgICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBJbnZhcmlhbnQ6IGFwcC1yb3V0ZSByZWNlaXZlZCBpbnZhbGlkIGNhY2hlIGVudHJ5ICR7Y2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogKF9jYWNoZUVudHJ5X3ZhbHVlMSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZTEua2luZH1gKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkU3MDFcIixcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcigneC1uZXh0anMtY2FjaGUnLCBpc09uRGVtYW5kUmV2YWxpZGF0ZSA/ICdSRVZBTElEQVRFRCcgOiBjYWNoZUVudHJ5LmlzTWlzcyA/ICdNSVNTJyA6IGNhY2hlRW50cnkuaXNTdGFsZSA/ICdTVEFMRScgOiAnSElUJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEcmFmdCBtb2RlIHNob3VsZCBuZXZlciBiZSBjYWNoZWRcbiAgICAgICAgICAgIGlmIChpc0RyYWZ0TW9kZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCAncHJpdmF0ZSwgbm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG11c3QtcmV2YWxpZGF0ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IGZyb21Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhjYWNoZUVudHJ5LnZhbHVlLmhlYWRlcnMpO1xuICAgICAgICAgICAgaWYgKCEoZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiBpc0lzcikpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLmRlbGV0ZShORVhUX0NBQ0hFX1RBR1NfSEVBREVSKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIGNhY2hlIGNvbnRyb2wgaXMgYWxyZWFkeSBzZXQgb24gdGhlIHJlc3BvbnNlIHdlIGRvbid0XG4gICAgICAgICAgICAvLyBvdmVycmlkZSBpdCB0byBhbGxvdyB1c2VycyB0byBjdXN0b21pemUgaXQgdmlhIG5leHQuY29uZmlnXG4gICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wgJiYgIXJlcy5nZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnKSAmJiAhaGVhZGVycy5nZXQoJ0NhY2hlLUNvbnRyb2wnKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuc2V0KCdDYWNoZS1Db250cm9sJywgZ2V0Q2FjaGVDb250cm9sSGVhZGVyKGNhY2hlRW50cnkuY2FjaGVDb250cm9sKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCBuZXcgUmVzcG9uc2UoY2FjaGVFbnRyeS52YWx1ZS5ib2R5LCB7XG4gICAgICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGNhY2hlRW50cnkudmFsdWUuc3RhdHVzIHx8IDIwMFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFRPRE86IGFjdGl2ZVNwYW4gY29kZSBwYXRoIGlzIGZvciB3aGVuIHdyYXBwZWQgYnlcbiAgICAgICAgLy8gbmV4dC1zZXJ2ZXIgY2FuIGJlIHJlbW92ZWQgd2hlbiB0aGlzIGlzIG5vIGxvbmdlciB1c2VkXG4gICAgICAgIGlmIChhY3RpdmVTcGFuKSB7XG4gICAgICAgICAgICBhd2FpdCBoYW5kbGVSZXNwb25zZShhY3RpdmVTcGFuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRyYWNlci53aXRoUHJvcGFnYXRlZENvbnRleHQocmVxLmhlYWRlcnMsICgpPT50cmFjZXIudHJhY2UoQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCwge1xuICAgICAgICAgICAgICAgICAgICBzcGFuTmFtZTogYCR7bWV0aG9kfSAke3JlcS51cmx9YCxcbiAgICAgICAgICAgICAgICAgICAga2luZDogU3BhbktpbmQuU0VSVkVSLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5tZXRob2QnOiBtZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC50YXJnZXQnOiByZXEudXJsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBoYW5kbGVSZXNwb25zZSkpO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmICghKGVyciBpbnN0YW5jZW9mIE5vRmFsbGJhY2tFcnJvcikpIHtcbiAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogbm9ybWFsaXplZFNyY1BhZ2UsXG4gICAgICAgICAgICAgICAgcm91dGVUeXBlOiAncm91dGUnLFxuICAgICAgICAgICAgICAgIHJldmFsaWRhdGVSZWFzb246IGdldFJldmFsaWRhdGVSZWFzb24oe1xuICAgICAgICAgICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJldGhyb3cgc28gdGhhdCB3ZSBjYW4gaGFuZGxlIHNlcnZpbmcgZXJyb3IgcGFnZVxuICAgICAgICAvLyBJZiB0aGlzIGlzIGR1cmluZyBzdGF0aWMgZ2VuZXJhdGlvbiwgdGhyb3cgdGhlIGVycm9yIGFnYWluLlxuICAgICAgICBpZiAoaXNJc3IpIHRocm93IGVycjtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBzZW5kIGEgNTAwIHJlc3BvbnNlLlxuICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCBuZXcgUmVzcG9uc2UobnVsbCwge1xuICAgICAgICAgICAgc3RhdHVzOiA1MDBcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5Cvercel-ai-agents%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5Cvercel-ai-agents&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/formdata-node","vendor-chunks/next","vendor-chunks/openai","vendor-chunks/tr46","vendor-chunks/zod","vendor-chunks/ai","vendor-chunks/@ai-sdk","vendor-chunks/web-streams-polyfill","vendor-chunks/zod-to-json-schema","vendor-chunks/@opentelemetry","vendor-chunks/node-fetch","vendor-chunks/whatwg-url","vendor-chunks/event-target-shim","vendor-chunks/agentkeepalive","vendor-chunks/form-data-encoder","vendor-chunks/webidl-conversions","vendor-chunks/eventsource-parser","vendor-chunks/secure-json-parse","vendor-chunks/abort-controller","vendor-chunks/ms","vendor-chunks/nanoid","vendor-chunks/humanize-ms","vendor-chunks/@pinecone-database"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5Cvercel-ai-agents%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5Cvercel-ai-agents&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();